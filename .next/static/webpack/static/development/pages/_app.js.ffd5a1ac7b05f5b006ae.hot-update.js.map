{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.ffd5a1ac7b05f5b006ae.hot-update.js","sources":["webpack:///./components/Layout.jsx"],"sourcesContent":["import Link from 'next/link'\r\nimport { Layout, Input, Icon, Avatar, Tooltip, Dropdown, Menu } from 'antd'\r\nimport { useState, useCallback } from 'react'\r\nimport Container from './Container'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { logout } from '../store/store'\r\nimport { useRouter} from 'next/router'\r\n\r\nconst { Header, Content, Footer } = Layout\r\nconst footerStyle = {\r\n    textAlign: 'center'\r\n}\r\nconst githubIconStyle = {\r\n    color: '#fff',\r\n    fontSize: 40,\r\n    display: 'block',\r\n    paddingTop: 10,\r\n    marginRight: 20,\r\n}\r\n\r\nconst AppLayout = ({ children }) => {\r\n    const router = useRouter()\r\n    const urlQuery = router.query && router.query.query\r\n    const [search, setSearch] = useState(urlQuery || '')\r\n    const user = useSelector(state => state.user)\r\n    const dispatch = useDispatch()\r\n\r\n    const handleSearchChange = useCallback((e) => {\r\n        setSearch(e.target.value)\r\n    }, [])\r\n\r\n    const handleOnSearch = useCallback(() => {\r\n        router.push(`/search?query=${search}`)\r\n    }, [search])\r\n\r\n    const handleLogout = useCallback(() => {\r\n        dispatch(logout())\r\n    },[])\r\n\r\n    const userDropdown = (\r\n        <Menu onClick={handleLogout}> \r\n            <Menu.Item>\r\n                登出\r\n            </Menu.Item>\r\n        </Menu>\r\n    )\r\n\r\n    return (\r\n        <Layout>\r\n            <Header>\r\n                <Container renderer={<div className=\"header-inner\"/>}>\r\n                    <div className=\"header-left\">\r\n                        <div className=\"logo\">\r\n                            {/* <Link href=\"/\"> */}\r\n                                <Icon type=\"github\" style={githubIconStyle} />\r\n                            {/* </Link> */}\r\n                        </div>\r\n                        <div>\r\n                            <Input.Search \r\n                                placeholder=\"搜索或跳转...\"\r\n                                value={search}\r\n                                onChange={handleSearchChange}\r\n                                onSearch={handleOnSearch}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"header-right\">\r\n                        <div className=\"user\">\r\n                            {user && user.id ? (\r\n                                <Dropdown overlay={userDropdown}>\r\n                                    <Avatar size={40} src={user.avatar_url} />\r\n                                </Dropdown>\r\n                            ) : (\r\n                                <Tooltip title=\"点击登录\">\r\n                                    <a href={`/prepare-auth?url=${router.asPath}`}>\r\n                                        <Avatar size={40} icon=\"user\" />\r\n                                    </a>\r\n                                </Tooltip>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </Container>\r\n            </Header>\r\n            <Content>\r\n                {/* 改变组件的渲染类型，不能指定props */}\r\n                {/* <Container comp=\"div\">{children}</Container> */}\r\n                <Container >{children}</Container>\r\n            </Content>\r\n            <Footer style={footerStyle}>\r\n                Hello Tara@<a href=\"mailto:taralovecats@163.com\">taralovecats@163.com</a>\r\n            </Footer>\r\n            <style jsx>{`\r\n                .header-inner {\r\n                    display: flex;\r\n                    justify-content: space-between;\r\n                }\r\n                .header-left {\r\n                    display: flex;\r\n                    display: flex-start;\r\n                }\r\n            `}</style>  \r\n            <style jsx global>{`\r\n                #__next {\r\n                    height: 100%;\r\n                }\r\n                .ant-layout {\r\n                    min-height: 100%;\r\n                }\r\n                .ant-layout-header {\r\n                    padding-left: 0,\r\n                    padding-right: 0\r\n                }\r\n                .ant-layout-content {\r\n                    background: #fff\r\n                }\r\n            `}</style>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default AppLayout\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AACA;AAGA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAMA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAGA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAQA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAaA;AAAA;AACA;AAAA;AAAA;AAzCA;AAAA;AAAA;AAAA;AAsEA;AACA;AACA;;;;A","sourceRoot":""}