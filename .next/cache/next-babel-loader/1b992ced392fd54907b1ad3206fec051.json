{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _Tabs from \"antd/lib/tabs\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useSelector } from 'react-redux';\nimport { useState, useEffect } from 'react';\nimport Repo from '../components/Repo';\nimport config from '../config';\nimport LRU from 'lru-cache';\nimport Router, { useRouter } from 'next/router';\nconst {\n  OAUTH_URL\n} = config;\nconst {\n  TabPane\n} = _Tabs;\nconst cache = new LRU({\n  maxAge: 1000 * 60 * 30 //30min\n\n});\nconst isServer = true;\nexport default function Index({\n  userRepos = [],\n  userStarredRepos = []\n}) {\n  const user = useSelector(state => state.user); // const initLoggedIn = user && user.id;\n  // const [userRepos, setUserRepos] = useState([]);\n  // const [userStarredRepos, setUserStarredRepos] = useState([]);\n  // const [loggedIn, setLoggedIn] = useState(initLoggedIn);\n\n  const router = useRouter();\n  const activeTabKey = router.query.key || 'repos';\n\n  const handleTabChange = activeTabKey => {\n    Router.push(`/?key=${activeTabKey}`);\n  }; // useEffect(() => {\n  //     if (loggedIn) { \n  //         if (cache.get('userRepos') && cache.get('userStarredRepos')) {\n  //             return;\n  //         }\n  //         (async () => {\n  //             const userRepos = await api.request(\n  //                 { url: '/user/repos' }, \n  //             )\n  //             const userStarredRepos = await api.request(\n  //                 { url: '/user/starred' }\n  //             )\n  //             setUserRepos(userRepos.data);\n  //             setUserStarredRepos(userStarredRepos.data)\n  //         })()\n  //     }\n  // }, [loggedIn])\n\n\n  useEffect(() => {\n    if (!isServer) {\n      //服务端环境不使用缓存\n      userRepos && cache.set('userRepos', userRepos);\n      userStarredRepos && cache.set('userStarredRepos', userStarredRepos);\n    }\n  }, [userRepos, userStarredRepos]);\n\n  const BeforeLogin = () => __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-449660228\" + \" \" + \"root\"\n  }, __jsx(_Button, {\n    href: OAUTH_URL\n  }, \"\\u672A\\u767B\\u5F55\\uFF0C\\u8BF7\\u70B9\\u51FB\\u767B\\u5F55\")), __jsx(_JSXStyle, {\n    id: \"449660228\"\n  }, \".root.jsx-449660228{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE0RGUsQUFHbUIsMEVBQ1UsbUdBQ0osNkZBQ3BCIiwiZmlsZSI6IkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCB7IEJ1dHRvbiwgVGFicyB9IGZyb20gJ2FudGQnXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi4vY29tcG9uZW50cy9SZXBvJ1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IExSVSBmcm9tICdscnUtY2FjaGUnXHJcbmltcG9ydCAgUm91dGVyLCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xyXG5cclxuY29uc3QgeyBPQVVUSF9VUkwgfSA9IGNvbmZpZztcclxuY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xyXG5jb25zdCBjYWNoZSA9IG5ldyBMUlUoe1xyXG4gICAgbWF4QWdlOiAxMDAwICogNjAgKiAzMCAvLzMwbWluXHJcbn0pXHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEluZGV4KHsgdXNlclJlcG9zID0gW10sIHVzZXJTdGFycmVkUmVwb3MgPSBbXSB9KSB7XHJcbiAgICBjb25zdCB1c2VyID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUudXNlcik7XHJcbiAgICAvLyBjb25zdCBpbml0TG9nZ2VkSW4gPSB1c2VyICYmIHVzZXIuaWQ7XHJcbiAgICAvLyBjb25zdCBbdXNlclJlcG9zLCBzZXRVc2VyUmVwb3NdID0gdXNlU3RhdGUoW10pO1xyXG4gICAgLy8gY29uc3QgW3VzZXJTdGFycmVkUmVwb3MsIHNldFVzZXJTdGFycmVkUmVwb3NdID0gdXNlU3RhdGUoW10pO1xyXG4gICAgLy8gY29uc3QgW2xvZ2dlZEluLCBzZXRMb2dnZWRJbl0gPSB1c2VTdGF0ZShpbml0TG9nZ2VkSW4pO1xyXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgICBjb25zdCBhY3RpdmVUYWJLZXkgPSByb3V0ZXIucXVlcnkua2V5IHx8ICdyZXBvcyc7XHJcblxyXG4gICAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gKGFjdGl2ZVRhYktleSkgPT4ge1xyXG4gICAgICAgIFJvdXRlci5wdXNoKGAvP2tleT0ke2FjdGl2ZVRhYktleX1gKVxyXG4gICAgfVxyXG5cclxuXHQvLyB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gICAgIGlmIChsb2dnZWRJbikgeyBcclxuICAgIC8vICAgICAgICAgaWYgKGNhY2hlLmdldCgndXNlclJlcG9zJykgJiYgY2FjaGUuZ2V0KCd1c2VyU3RhcnJlZFJlcG9zJykpIHtcclxuICAgIC8vICAgICAgICAgICAgIHJldHVybjtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICAoYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICAgICAgY29uc3QgdXNlclJlcG9zID0gYXdhaXQgYXBpLnJlcXVlc3QoXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgeyB1cmw6ICcvdXNlci9yZXBvcycgfSwgXHJcbiAgICAvLyAgICAgICAgICAgICApXHJcbiAgICAvLyAgICAgICAgICAgICBjb25zdCB1c2VyU3RhcnJlZFJlcG9zID0gYXdhaXQgYXBpLnJlcXVlc3QoXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgeyB1cmw6ICcvdXNlci9zdGFycmVkJyB9XHJcbiAgICAvLyAgICAgICAgICAgICApXHJcbiAgICAvLyAgICAgICAgICAgICBzZXRVc2VyUmVwb3ModXNlclJlcG9zLmRhdGEpO1xyXG4gICAgLy8gICAgICAgICAgICAgc2V0VXNlclN0YXJyZWRSZXBvcyh1c2VyU3RhcnJlZFJlcG9zLmRhdGEpXHJcbiAgICAvLyAgICAgICAgIH0pKClcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9LCBbbG9nZ2VkSW5dKVxyXG4gICAgXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICghaXNTZXJ2ZXIpIHsgLy/mnI3liqHnq6/njq/looPkuI3kvb/nlKjnvJPlrZhcclxuICAgICAgICAgICAgdXNlclJlcG9zICYmIGNhY2hlLnNldCgndXNlclJlcG9zJywgdXNlclJlcG9zKVxyXG4gICAgICAgICAgICB1c2VyU3RhcnJlZFJlcG9zICYmICBjYWNoZS5zZXQoJ3VzZXJTdGFycmVkUmVwb3MnLCB1c2VyU3RhcnJlZFJlcG9zKVxyXG4gICAgICAgIH1cclxuICAgIH0sIFt1c2VyUmVwb3MsIHVzZXJTdGFycmVkUmVwb3NdKVxyXG5cclxuXHRjb25zdCBCZWZvcmVMb2dpbiA9ICgpID0+IChcclxuXHRcdDw+XHJcblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG5cdFx0XHRcdDxCdXR0b24gaHJlZj17T0FVVEhfVVJMfT5cclxuICAgICAgICAgICAgICAgICAgICDmnKrnmbvlvZXvvIzor7fngrnlh7vnmbvlvZVcclxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdFx0PHN0eWxlIGpzeD57YFxyXG5cdFx0XHRcdC5yb290IHtcclxuXHRcdFx0XHRcdGRpc3BsYXk6IGZsZXg7XHJcblx0XHRcdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuXHRcdFx0XHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRgfTwvc3R5bGU+XHJcblx0XHQ8Lz5cclxuXHQpXHJcblx0XHJcblx0aWYgKCF1c2VyIHx8ICF1c2VyLmlkKSB7XHJcblx0XHRyZXR1cm4gPEJlZm9yZUxvZ2luIC8+XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gKFxyXG5cdFx0PD5cclxuXHRcdFx0PGRpdiBjbGFzc05hbWU9XCJyb290XCI+XHJcblx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJ1c2VyLWluZm9cIj5cclxuXHRcdFx0XHRcdDxpbWcgc3JjPXt1c2VyLmF2YXRhcl91cmx9IGFsdD1cInVzZXIgYXZhdGFyXCIgY2xhc3NOYW1lPVwidXNlci1hdmF0YXJcIi8+XHJcblx0XHRcdFx0XHQ8cCBjbGFzc05hbWU9XCJ1c2VyLW5hbWVcIj57dXNlci5sb2dpbn08L3A+XHJcblx0XHRcdFx0PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8VGFicyBcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVLZXk9e2FjdGl2ZVRhYktleX0gXHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVRhYkNoYW5nZX0gXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUYWJQYW5lIGtleT1cInJlcG9zXCIgdGFiPVwiUmVwb3NpdG9yaWVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cInVzZXItcmVwb3NcIj4gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXNlclJlcG9zLm1hcChyZXBvID0+IDxSZXBvIGtleT17cmVwby5pZH0gcmVwbz17cmVwb30gLz4pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogPC9kaXY+ICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgICAgICA8VGFiUGFuZSBrZXk9XCJzdGFyc1wiIHRhYj1cIlN0YXJzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyU3RhcnJlZFJlcG9zLm1hcChyZXBvID0+IDxSZXBvIGtleT17cmVwby5pZH0gcmVwbz17cmVwb30gLz4pfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgIDwvVGFicz5cclxuXHRcdFx0PC9kaXY+XHJcblx0XHRcdDxzdHlsZSBqc3g+e2BcclxuXHRcdFx0XHQucm9vdCB7XHJcblx0XHRcdFx0XHRkaXNwbGF5OiBmbGV4O1xyXG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcblx0XHRcdFx0XHRwYWRkaW5nOiAyMHB4IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC51c2VyLWluZm8ge1xyXG5cdFx0XHRcdFx0d2lkdGg6IDIwMHB4O1xyXG5cdFx0XHRcdFx0bWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQudXNlci1uYW1lIHtcclxuXHRcdFx0XHRcdGZvbnQtc2l6ZTogMjBweDtcclxuXHRcdFx0XHRcdGZvbnQtd2VpZ2h0OiAzMDA7XHJcblx0XHRcdFx0XHRtYXJnaW4tdG9wOiAxMHB4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQudXNlci1hdmF0YXIge1xyXG5cdFx0XHRcdFx0d2lkdGg6IDEwMCU7XHJcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiA0cHg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRgfTwvc3R5bGU+XHJcblx0XHQ8Lz5cclxuXHQpXHJcbn1cclxuXHJcbmNvbnN0IGFwaSA9IHJlcXVpcmUoJy4uL2xpYi9hcGknKVxyXG4vL+iwg+eUqO+8miDmnI3liqHnq6/muLLmn5NpbmRleOaXtiAv5a6i5oi356uv5a+86Iiq5YiwaW5kZXjml7ZcclxuLy/mtY/op4jlmajnjq/looPvvJogYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAveHh4JylcclxuLy9ub2Rl546v5aKD77yaIGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MC94eHgnKVxyXG5JbmRleC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyAoY29udGV4dCkgPT4ge1xyXG4gICAgY29uc3QgeyByZXEsIHJlcywgcmVkdXhTdG9yZSB9ID0gY29udGV4dDtcclxuICAgIGNvbnNvbGUubG9nKCdpbiBpbmRleCBnZXRJbml0aXRhbFByb3BzJylcclxuICAgIGNvbnN0IHVzZXIgPSByZWR1eFN0b3JlLmdldFN0YXRlKCkudXNlcjtcclxuICAgIGlmICghdXNlciB8fCAhdXNlci5pZCApIHtcclxuICAgICAgICByZXR1cm4ge30gIFxyXG4gICAgfVxyXG4gICAgaWYgKCFpc1NlcnZlcikgeyAvL+acjeWKoeerr+eOr+Wig+S4jeS9v+eUqOe8k+WtmFxyXG4gICAgICAgIGNvbnN0IHVzZXJSZXBvcyA9IGNhY2hlLmdldCgndXNlclJlcG9zJyk7XHJcbiAgICAgICAgY29uc3QgdXNlclN0YXJyZWRSZXBvcyA9IGNhY2hlLmdldCgndXNlclN0YXJyZWRSZXBvcycpXHJcbiAgICAgICAgaWYgKHVzZXJSZXBvcyAmJiB1c2VyU3RhcnJlZFJlcG9zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyUmVwb3MsXHJcbiAgICAgICAgICAgICAgICB1c2VyU3RhcnJlZFJlcG9zICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXJSZXBvc1Jlc3AgPSBhd2FpdCBhcGkucmVxdWVzdChcclxuICAgICAgICB7IHVybDogJy91c2VyL3JlcG9zJyB9LCBcclxuICAgICAgICByZXEsIFxyXG4gICAgICAgIHJlc1xyXG4gICAgKTtcclxuICAgIGNvbnN0IHVzZXJTdGFycmVkUmVwb3NSZXNwID0gYXdhaXQgYXBpLnJlcXVlc3QoXHJcbiAgICAgICAgeyB1cmw6ICcvdXNlci9zdGFycmVkJ30sXHJcbiAgICAgICAgcmVxLFxyXG4gICAgICAgIHJlc1xyXG4gICAgKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1c2VyUmVwb3M6IHVzZXJSZXBvc1Jlc3AuZGF0YSxcclxuICAgICAgICB1c2VyU3RhcnJlZFJlcG9zOiB1c2VyU3RhcnJlZFJlcG9zUmVzcC5kYXRhXHJcbiAgICB9XHJcbn1cclxuXHJcbiJdfQ== */\\n/*@ sourceURL=D:\\\\\\\\\\u7F16\\u7A0B\\\\\\\\\\u9879\\u76EE\\\\\\\\next\\u9879\\u76EE\\\\\\\\next-github\\\\\\\\pages\\\\\\\\index.js */\"));\n\n  if (!user || !user.id) {\n    return __jsx(BeforeLogin, null);\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-1042228906\" + \" \" + \"root\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1042228906\" + \" \" + \"user-info\"\n  }, __jsx(\"img\", {\n    src: user.avatar_url,\n    alt: \"user avatar\",\n    className: \"jsx-1042228906\" + \" \" + \"user-avatar\"\n  }), __jsx(\"p\", {\n    className: \"jsx-1042228906\" + \" \" + \"user-name\"\n  }, user.login)), __jsx(_Tabs, {\n    activeKey: activeTabKey,\n    onChange: handleTabChange,\n    animated: false\n  }, __jsx(TabPane, {\n    key: \"repos\",\n    tab: \"Repositories\"\n  }, userRepos.map(repo => __jsx(Repo, {\n    key: repo.id,\n    repo: repo\n  }))), __jsx(TabPane, {\n    key: \"stars\",\n    tab: \"Stars\"\n  }, userStarredRepos.map(repo => __jsx(Repo, {\n    key: repo.id,\n    repo: repo\n  }))))), __jsx(_JSXStyle, {\n    id: \"1042228906\"\n  }, \".root.jsx-1042228906{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:20px 0;}.user-info.jsx-1042228906{width:200px;margin-right:40px;}.user-name.jsx-1042228906{font-size:20px;font-weight:300;margin-top:10px;}.user-avatar.jsx-1042228906{width:100%;border-radius:4px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnR2UsQUFHbUIsQUFLRCxBQUlHLEFBS0osV0FDTyxDQVRBLEdBSUYsY0FNakIsQ0FUQSxDQUlpQixnQkFDakIsMkJBWHdCLDZHQUNSLGVBQ2hCIiwiZmlsZSI6IkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCB7IEJ1dHRvbiwgVGFicyB9IGZyb20gJ2FudGQnXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi4vY29tcG9uZW50cy9SZXBvJ1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcclxuaW1wb3J0IExSVSBmcm9tICdscnUtY2FjaGUnXHJcbmltcG9ydCAgUm91dGVyLCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xyXG5cclxuY29uc3QgeyBPQVVUSF9VUkwgfSA9IGNvbmZpZztcclxuY29uc3QgeyBUYWJQYW5lIH0gPSBUYWJzO1xyXG5jb25zdCBjYWNoZSA9IG5ldyBMUlUoe1xyXG4gICAgbWF4QWdlOiAxMDAwICogNjAgKiAzMCAvLzMwbWluXHJcbn0pXHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCdcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEluZGV4KHsgdXNlclJlcG9zID0gW10sIHVzZXJTdGFycmVkUmVwb3MgPSBbXSB9KSB7XHJcbiAgICBjb25zdCB1c2VyID0gdXNlU2VsZWN0b3Ioc3RhdGUgPT4gc3RhdGUudXNlcik7XHJcbiAgICAvLyBjb25zdCBpbml0TG9nZ2VkSW4gPSB1c2VyICYmIHVzZXIuaWQ7XHJcbiAgICAvLyBjb25zdCBbdXNlclJlcG9zLCBzZXRVc2VyUmVwb3NdID0gdXNlU3RhdGUoW10pO1xyXG4gICAgLy8gY29uc3QgW3VzZXJTdGFycmVkUmVwb3MsIHNldFVzZXJTdGFycmVkUmVwb3NdID0gdXNlU3RhdGUoW10pO1xyXG4gICAgLy8gY29uc3QgW2xvZ2dlZEluLCBzZXRMb2dnZWRJbl0gPSB1c2VTdGF0ZShpbml0TG9nZ2VkSW4pO1xyXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgICBjb25zdCBhY3RpdmVUYWJLZXkgPSByb3V0ZXIucXVlcnkua2V5IHx8ICdyZXBvcyc7XHJcblxyXG4gICAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gKGFjdGl2ZVRhYktleSkgPT4ge1xyXG4gICAgICAgIFJvdXRlci5wdXNoKGAvP2tleT0ke2FjdGl2ZVRhYktleX1gKVxyXG4gICAgfVxyXG5cclxuXHQvLyB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gICAgIGlmIChsb2dnZWRJbikgeyBcclxuICAgIC8vICAgICAgICAgaWYgKGNhY2hlLmdldCgndXNlclJlcG9zJykgJiYgY2FjaGUuZ2V0KCd1c2VyU3RhcnJlZFJlcG9zJykpIHtcclxuICAgIC8vICAgICAgICAgICAgIHJldHVybjtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICAoYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gICAgICAgICAgICAgY29uc3QgdXNlclJlcG9zID0gYXdhaXQgYXBpLnJlcXVlc3QoXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgeyB1cmw6ICcvdXNlci9yZXBvcycgfSwgXHJcbiAgICAvLyAgICAgICAgICAgICApXHJcbiAgICAvLyAgICAgICAgICAgICBjb25zdCB1c2VyU3RhcnJlZFJlcG9zID0gYXdhaXQgYXBpLnJlcXVlc3QoXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgeyB1cmw6ICcvdXNlci9zdGFycmVkJyB9XHJcbiAgICAvLyAgICAgICAgICAgICApXHJcbiAgICAvLyAgICAgICAgICAgICBzZXRVc2VyUmVwb3ModXNlclJlcG9zLmRhdGEpO1xyXG4gICAgLy8gICAgICAgICAgICAgc2V0VXNlclN0YXJyZWRSZXBvcyh1c2VyU3RhcnJlZFJlcG9zLmRhdGEpXHJcbiAgICAvLyAgICAgICAgIH0pKClcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9LCBbbG9nZ2VkSW5dKVxyXG4gICAgXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgIGlmICghaXNTZXJ2ZXIpIHsgLy/mnI3liqHnq6/njq/looPkuI3kvb/nlKjnvJPlrZhcclxuICAgICAgICAgICAgdXNlclJlcG9zICYmIGNhY2hlLnNldCgndXNlclJlcG9zJywgdXNlclJlcG9zKVxyXG4gICAgICAgICAgICB1c2VyU3RhcnJlZFJlcG9zICYmICBjYWNoZS5zZXQoJ3VzZXJTdGFycmVkUmVwb3MnLCB1c2VyU3RhcnJlZFJlcG9zKVxyXG4gICAgICAgIH1cclxuICAgIH0sIFt1c2VyUmVwb3MsIHVzZXJTdGFycmVkUmVwb3NdKVxyXG5cclxuXHRjb25zdCBCZWZvcmVMb2dpbiA9ICgpID0+IChcclxuXHRcdDw+XHJcblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG5cdFx0XHRcdDxCdXR0b24gaHJlZj17T0FVVEhfVVJMfT5cclxuICAgICAgICAgICAgICAgICAgICDmnKrnmbvlvZXvvIzor7fngrnlh7vnmbvlvZVcclxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdFx0PHN0eWxlIGpzeD57YFxyXG5cdFx0XHRcdC5yb290IHtcclxuXHRcdFx0XHRcdGRpc3BsYXk6IGZsZXg7XHJcblx0XHRcdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuXHRcdFx0XHRcdGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRgfTwvc3R5bGU+XHJcblx0XHQ8Lz5cclxuXHQpXHJcblx0XHJcblx0aWYgKCF1c2VyIHx8ICF1c2VyLmlkKSB7XHJcblx0XHRyZXR1cm4gPEJlZm9yZUxvZ2luIC8+XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gKFxyXG5cdFx0PD5cclxuXHRcdFx0PGRpdiBjbGFzc05hbWU9XCJyb290XCI+XHJcblx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJ1c2VyLWluZm9cIj5cclxuXHRcdFx0XHRcdDxpbWcgc3JjPXt1c2VyLmF2YXRhcl91cmx9IGFsdD1cInVzZXIgYXZhdGFyXCIgY2xhc3NOYW1lPVwidXNlci1hdmF0YXJcIi8+XHJcblx0XHRcdFx0XHQ8cCBjbGFzc05hbWU9XCJ1c2VyLW5hbWVcIj57dXNlci5sb2dpbn08L3A+XHJcblx0XHRcdFx0PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8VGFicyBcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVLZXk9e2FjdGl2ZVRhYktleX0gXHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZVRhYkNoYW5nZX0gXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZWQ9e2ZhbHNlfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxUYWJQYW5lIGtleT1cInJlcG9zXCIgdGFiPVwiUmVwb3NpdG9yaWVzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKiA8ZGl2IGNsYXNzTmFtZT1cInVzZXItcmVwb3NcIj4gKi99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXNlclJlcG9zLm1hcChyZXBvID0+IDxSZXBvIGtleT17cmVwby5pZH0gcmVwbz17cmVwb30gLz4pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogPC9kaXY+ICovfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgICAgICA8VGFiUGFuZSBrZXk9XCJzdGFyc1wiIHRhYj1cIlN0YXJzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyU3RhcnJlZFJlcG9zLm1hcChyZXBvID0+IDxSZXBvIGtleT17cmVwby5pZH0gcmVwbz17cmVwb30gLz4pfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgIDwvVGFicz5cclxuXHRcdFx0PC9kaXY+XHJcblx0XHRcdDxzdHlsZSBqc3g+e2BcclxuXHRcdFx0XHQucm9vdCB7XHJcblx0XHRcdFx0XHRkaXNwbGF5OiBmbGV4O1xyXG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcblx0XHRcdFx0XHRwYWRkaW5nOiAyMHB4IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC51c2VyLWluZm8ge1xyXG5cdFx0XHRcdFx0d2lkdGg6IDIwMHB4O1xyXG5cdFx0XHRcdFx0bWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQudXNlci1uYW1lIHtcclxuXHRcdFx0XHRcdGZvbnQtc2l6ZTogMjBweDtcclxuXHRcdFx0XHRcdGZvbnQtd2VpZ2h0OiAzMDA7XHJcblx0XHRcdFx0XHRtYXJnaW4tdG9wOiAxMHB4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQudXNlci1hdmF0YXIge1xyXG5cdFx0XHRcdFx0d2lkdGg6IDEwMCU7XHJcblx0XHRcdFx0XHRib3JkZXItcmFkaXVzOiA0cHg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRgfTwvc3R5bGU+XHJcblx0XHQ8Lz5cclxuXHQpXHJcbn1cclxuXHJcbmNvbnN0IGFwaSA9IHJlcXVpcmUoJy4uL2xpYi9hcGknKVxyXG4vL+iwg+eUqO+8miDmnI3liqHnq6/muLLmn5NpbmRleOaXtiAv5a6i5oi356uv5a+86Iiq5YiwaW5kZXjml7ZcclxuLy/mtY/op4jlmajnjq/looPvvJogYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAveHh4JylcclxuLy9ub2Rl546v5aKD77yaIGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MC94eHgnKVxyXG5JbmRleC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyAoY29udGV4dCkgPT4ge1xyXG4gICAgY29uc3QgeyByZXEsIHJlcywgcmVkdXhTdG9yZSB9ID0gY29udGV4dDtcclxuICAgIGNvbnNvbGUubG9nKCdpbiBpbmRleCBnZXRJbml0aXRhbFByb3BzJylcclxuICAgIGNvbnN0IHVzZXIgPSByZWR1eFN0b3JlLmdldFN0YXRlKCkudXNlcjtcclxuICAgIGlmICghdXNlciB8fCAhdXNlci5pZCApIHtcclxuICAgICAgICByZXR1cm4ge30gIFxyXG4gICAgfVxyXG4gICAgaWYgKCFpc1NlcnZlcikgeyAvL+acjeWKoeerr+eOr+Wig+S4jeS9v+eUqOe8k+WtmFxyXG4gICAgICAgIGNvbnN0IHVzZXJSZXBvcyA9IGNhY2hlLmdldCgndXNlclJlcG9zJyk7XHJcbiAgICAgICAgY29uc3QgdXNlclN0YXJyZWRSZXBvcyA9IGNhY2hlLmdldCgndXNlclN0YXJyZWRSZXBvcycpXHJcbiAgICAgICAgaWYgKHVzZXJSZXBvcyAmJiB1c2VyU3RhcnJlZFJlcG9zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyUmVwb3MsXHJcbiAgICAgICAgICAgICAgICB1c2VyU3RhcnJlZFJlcG9zICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHVzZXJSZXBvc1Jlc3AgPSBhd2FpdCBhcGkucmVxdWVzdChcclxuICAgICAgICB7IHVybDogJy91c2VyL3JlcG9zJyB9LCBcclxuICAgICAgICByZXEsIFxyXG4gICAgICAgIHJlc1xyXG4gICAgKTtcclxuICAgIGNvbnN0IHVzZXJTdGFycmVkUmVwb3NSZXNwID0gYXdhaXQgYXBpLnJlcXVlc3QoXHJcbiAgICAgICAgeyB1cmw6ICcvdXNlci9zdGFycmVkJ30sXHJcbiAgICAgICAgcmVxLFxyXG4gICAgICAgIHJlc1xyXG4gICAgKVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB1c2VyUmVwb3M6IHVzZXJSZXBvc1Jlc3AuZGF0YSxcclxuICAgICAgICB1c2VyU3RhcnJlZFJlcG9zOiB1c2VyU3RhcnJlZFJlcG9zUmVzcC5kYXRhXHJcbiAgICB9XHJcbn1cclxuXHJcbiJdfQ== */\\n/*@ sourceURL=D:\\\\\\\\\\u7F16\\u7A0B\\\\\\\\\\u9879\\u76EE\\\\\\\\next\\u9879\\u76EE\\\\\\\\next-github\\\\\\\\pages\\\\\\\\index.js */\"));\n}\n\nconst api = require('../lib/api'); //调用： 服务端渲染index时 /客户端导航到index时\n//浏览器环境： axios.get('http://localhost:3000/xxx')\n//node环境： axios.get('http://localhost:80/xxx')\n\n\nIndex.getInitialProps = async context => {\n  const {\n    req,\n    res,\n    reduxStore\n  } = context;\n  console.log('in index getInititalProps');\n  const user = reduxStore.getState().user;\n\n  if (!user || !user.id) {\n    return {};\n  }\n\n  if (!isServer) {\n    //服务端环境不使用缓存\n    const userRepos = cache.get('userRepos');\n    const userStarredRepos = cache.get('userStarredRepos');\n\n    if (userRepos && userStarredRepos) {\n      return {\n        userRepos,\n        userStarredRepos\n      };\n    }\n  }\n\n  const userReposResp = await api.request({\n    url: '/user/repos'\n  }, req, res);\n  const userStarredReposResp = await api.request({\n    url: '/user/starred'\n  }, req, res);\n  return {\n    userRepos: userReposResp.data,\n    userStarredRepos: userStarredReposResp.data\n  };\n};","map":{"version":3,"sources":["D:/编程/项目/next项目/next-github/pages/index.js"],"names":["useSelector","useState","useEffect","Repo","config","LRU","Router","useRouter","OAUTH_URL","TabPane","cache","maxAge","isServer","Index","userRepos","userStarredRepos","user","state","router","activeTabKey","query","key","handleTabChange","push","set","BeforeLogin","id","avatar_url","login","map","repo","api","require","getInitialProps","context","req","res","reduxStore","console","log","getState","get","userReposResp","request","url","userStarredReposResp","data"],"mappings":"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","sourcesContent":["import { useSelector } from 'react-redux'\r\nimport { Button, Tabs } from 'antd'\r\nimport { useState, useEffect } from 'react'\r\nimport Repo from '../components/Repo'\r\nimport config from '../config'\r\nimport LRU from 'lru-cache'\r\nimport  Router, { useRouter } from 'next/router'\r\n\r\nconst { OAUTH_URL } = config;\r\nconst { TabPane } = Tabs;\r\nconst cache = new LRU({\r\n    maxAge: 1000 * 60 * 30 //30min\r\n})\r\nconst isServer = typeof window === 'undefined'\r\n\r\nexport default function Index({ userRepos = [], userStarredRepos = [] }) {\r\n    const user = useSelector(state => state.user);\r\n    // const initLoggedIn = user && user.id;\r\n    // const [userRepos, setUserRepos] = useState([]);\r\n    // const [userStarredRepos, setUserStarredRepos] = useState([]);\r\n    // const [loggedIn, setLoggedIn] = useState(initLoggedIn);\r\n    const router = useRouter();\r\n    const activeTabKey = router.query.key || 'repos';\r\n\r\n    const handleTabChange = (activeTabKey) => {\r\n        Router.push(`/?key=${activeTabKey}`)\r\n    }\r\n\r\n\t// useEffect(() => {\r\n    //     if (loggedIn) { \r\n    //         if (cache.get('userRepos') && cache.get('userStarredRepos')) {\r\n    //             return;\r\n    //         }\r\n    //         (async () => {\r\n    //             const userRepos = await api.request(\r\n    //                 { url: '/user/repos' }, \r\n    //             )\r\n    //             const userStarredRepos = await api.request(\r\n    //                 { url: '/user/starred' }\r\n    //             )\r\n    //             setUserRepos(userRepos.data);\r\n    //             setUserStarredRepos(userStarredRepos.data)\r\n    //         })()\r\n    //     }\r\n    // }, [loggedIn])\r\n    \r\n    useEffect(() => {\r\n        if (!isServer) { //服务端环境不使用缓存\r\n            userRepos && cache.set('userRepos', userRepos)\r\n            userStarredRepos &&  cache.set('userStarredRepos', userStarredRepos)\r\n        }\r\n    }, [userRepos, userStarredRepos])\r\n\r\n\tconst BeforeLogin = () => (\r\n\t\t<>\r\n\t\t\t<div className=\"root\">\r\n\t\t\t\t<Button href={OAUTH_URL}>\r\n                    未登录，请点击登录\r\n                </Button>\r\n\t\t\t</div>\r\n\t\t\t<style jsx>{`\r\n\t\t\t\t.root {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\t\t\t`}</style>\r\n\t\t</>\r\n\t)\r\n\t\r\n\tif (!user || !user.id) {\r\n\t\treturn <BeforeLogin />\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"root\">\r\n\t\t\t\t<div className=\"user-info\">\r\n\t\t\t\t\t<img src={user.avatar_url} alt=\"user avatar\" className=\"user-avatar\"/>\r\n\t\t\t\t\t<p className=\"user-name\">{user.login}</p>\r\n\t\t\t\t</div>\r\n                <Tabs \r\n                    activeKey={activeTabKey} \r\n                    onChange={handleTabChange} \r\n                    animated={false}\r\n                >\r\n                    <TabPane key=\"repos\" tab=\"Repositories\">\r\n                        {/* <div className=\"user-repos\"> */}\r\n                            {userRepos.map(repo => <Repo key={repo.id} repo={repo} />)}\r\n                        {/* </div> */}\r\n                    </TabPane>\r\n                    <TabPane key=\"stars\" tab=\"Stars\">\r\n                        {userStarredRepos.map(repo => <Repo key={repo.id} repo={repo} />)}\r\n                    </TabPane>\r\n                </Tabs>\r\n\t\t\t</div>\r\n\t\t\t<style jsx>{`\r\n\t\t\t\t.root {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: flex-start;\r\n\t\t\t\t\tpadding: 20px 0;\r\n\t\t\t\t}\r\n\t\t\t\t.user-info {\r\n\t\t\t\t\twidth: 200px;\r\n\t\t\t\t\tmargin-right: 40px;\r\n\t\t\t\t}\r\n\t\t\t\t.user-name {\r\n\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\tfont-weight: 300;\r\n\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t}\r\n\t\t\t\t.user-avatar {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tborder-radius: 4px;\r\n\t\t\t\t}\r\n\t\t\t`}</style>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nconst api = require('../lib/api')\r\n//调用： 服务端渲染index时 /客户端导航到index时\r\n//浏览器环境： axios.get('http://localhost:3000/xxx')\r\n//node环境： axios.get('http://localhost:80/xxx')\r\nIndex.getInitialProps = async (context) => {\r\n    const { req, res, reduxStore } = context;\r\n    console.log('in index getInititalProps')\r\n    const user = reduxStore.getState().user;\r\n    if (!user || !user.id ) {\r\n        return {}  \r\n    }\r\n    if (!isServer) { //服务端环境不使用缓存\r\n        const userRepos = cache.get('userRepos');\r\n        const userStarredRepos = cache.get('userStarredRepos')\r\n        if (userRepos && userStarredRepos) {\r\n            return {\r\n                userRepos,\r\n                userStarredRepos    \r\n            }\r\n        }\r\n    }\r\n\r\n    const userReposResp = await api.request(\r\n        { url: '/user/repos' }, \r\n        req, \r\n        res\r\n    );\r\n    const userStarredReposResp = await api.request(\r\n        { url: '/user/starred'},\r\n        req,\r\n        res\r\n    )\r\n    return {\r\n        userRepos: userReposResp.data,\r\n        userStarredRepos: userStarredReposResp.data\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}