{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useSelector } from 'react-redux';\nimport { useEffect } from 'react';\nimport Repo from '../components/Repo';\nexport default function Index(_ref) {\n  var data = _ref.data;\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var userRepos = [];\n  useEffect(function () {\n    console.log('useEffect called')(function _callee() {\n      var result;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(api.request({\n                url: '/user/repos'\n              }));\n\n            case 2:\n              result = _context.sent;\n              userRepos = result.data;\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    })();\n  }, []);\n\n  var BeforeLogin = function BeforeLogin() {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"jsx-449660228\" + \" \" + \"root\"\n    }, __jsx(_Button, null, \"\\u672A\\u767B\\u5F55\\uFF0C\\u8BF7\\u70B9\\u51FB\\u767B\\u5F55\")), __jsx(_JSXStyle, {\n      id: \"449660228\"\n    }, \".root.jsx-449660228{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5QmUsQUFHbUIsMEVBQ1UsbUdBQ0osNkZBQ3BCIiwiZmlsZSI6IkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2FudGQnXHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgUmVwbyBmcm9tICcuLi9jb21wb25lbnRzL1JlcG8nXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbmRleCh7IGRhdGEgfSkge1xyXG5cdGNvbnN0IHVzZXIgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS51c2VyKVxyXG5cdGxldCB1c2VyUmVwb3MgPSBbXVxyXG5cdHVzZUVmZmVjdCgoKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZygndXNlRWZmZWN0IGNhbGxlZCcpXHJcblx0XHQoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBhcGkucmVxdWVzdChcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR1cmw6ICcvdXNlci9yZXBvcydcclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0KVxyXG5cdFx0XHR1c2VyUmVwb3MgPSByZXN1bHQuZGF0YVxyXG5cdFx0fSkoKVxyXG5cdH0sIFtdKVxyXG5cclxuXHRjb25zdCBCZWZvcmVMb2dpbiA9ICgpID0+IChcclxuXHRcdDw+XHJcblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG5cdFx0XHRcdDxCdXR0b24+5pyq55m75b2V77yM6K+354K55Ye755m75b2VPC9CdXR0b24+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0XHQ8c3R5bGUganN4PntgXHJcblx0XHRcdFx0LnJvb3Qge1xyXG5cdFx0XHRcdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdFx0XHRcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdGB9PC9zdHlsZT5cclxuXHRcdDwvPlxyXG5cdClcclxuXHRcclxuXHRpZiAoIXVzZXIgfHwgIXVzZXIuaWQpIHtcclxuXHRcdHJldHVybiA8QmVmb3JlTG9naW4gLz5cclxuXHR9XHJcblxyXG5cdHJldHVybiAoXHJcblx0XHQ8PlxyXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cclxuXHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInVzZXItaW5mb1wiPlxyXG5cdFx0XHRcdFx0PGltZyBzcmM9e3VzZXIuYXZhdGFyX3VybH0gYWx0PVwidXNlciBhdmF0YXJcIiBjbGFzc05hbWU9XCJ1c2VyLWF2YXRhclwiLz5cclxuXHRcdFx0XHRcdDxwIGNsYXNzTmFtZT1cInVzZXItbmFtZVwiPnt1c2VyLmxvZ2lufTwvcD5cclxuXHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0PC9kaXY+XHJcblx0XHRcdDxzdHlsZSBqc3g+e2BcclxuXHRcdFx0XHQucm9vdCB7XHJcblx0XHRcdFx0XHRkaXNwbGF5OiBmbGV4O1xyXG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcblx0XHRcdFx0XHRwYWRkaW5nOiAyMHB4IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC51c2VyLWluZm8ge1xyXG5cdFx0XHRcdFx0d2lkdGg6IDIwMHB4O1xyXG5cdFx0XHRcdFx0bWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG5cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0LnVzZXItbmFtZSB7XHJcblx0XHRcdFx0XHRmb250LXNpemU6IDIwcHg7XHJcblx0XHRcdFx0XHRmb250LXdlaWdodDogMzAwO1xyXG5cdFx0XHRcdFx0bWFyZ2luLXRvcDogMTBweDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0LnVzZXItYXZhdGFyIHtcclxuXHRcdFx0XHRcdHdpZHRoOiAxMDAlO1xyXG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogNHB4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0YH08L3N0eWxlPlxyXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInVzZXItcmVwb3NcIj5cclxuXHRcdFx0XHR7dXNlclJlcG9zLm1hcChyZXBvID0+IDxSZXBvIHJlcG89e3JlcG99Lz4pfVxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdDwvPlxyXG5cdClcclxufVxyXG5cclxuY29uc3QgYXBpID0gcmVxdWlyZSgnLi4vbGliL2FwaScpXHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gdW5kZWZpbmVkXHJcblxyXG4vL+iwg+eUqO+8miDmnI3liqHnq6/muLLmn5NpbmRleOaXtiAv5a6i5oi356uv5a+86Iiq5YiwaW5kZXjml7ZcclxuSW5kZXguZ2V0SW5pdGl0YWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XHJcbiAgICAvL+a1j+iniOWZqOeOr+Wig++8miBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpXHJcbiAgICAvL25vZGXnjq/looPvvJogYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwJylcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXJsOiAnL3VzZXIvcmVwb3MnXHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgY3R4LnJlcSwgXHJcbiAgICAgICAgY3R4LnJlc1xyXG4gICAgKVxyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiByZXN1bHQuZGF0YVxyXG4gICAgfVxyXG59XHJcblxyXG4iXX0= */\\n/*@ sourceURL=D:\\\\\\\\\\u7F16\\u7A0B\\\\\\\\\\u9879\\u76EE\\\\\\\\next\\u9879\\u76EE\\\\\\\\next-github\\\\\\\\pages\\\\\\\\index.js */\"));\n  };\n\n  if (!user || !user.id) {\n    return __jsx(BeforeLogin, null);\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-331183154\" + \" \" + \"root\"\n  }, __jsx(\"div\", {\n    className: \"jsx-331183154\" + \" \" + \"user-info\"\n  }, __jsx(\"img\", {\n    src: user.avatar_url,\n    alt: \"user avatar\",\n    className: \"jsx-331183154\" + \" \" + \"user-avatar\"\n  }), __jsx(\"p\", {\n    className: \"jsx-331183154\" + \" \" + \"user-name\"\n  }, user.login))), __jsx(_JSXStyle, {\n    id: \"331183154\"\n  }, \".root.jsx-331183154{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:20px 0;}.user-info.jsx-331183154{width:200px;margin-right:40px;}.user-name.jsx-331183154{font-size:20px;font-weight:300;margin-top:10px;}.user-avatar.jsx-331183154{width:100%;border-radius:4px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErQ2UsQUFHbUIsQUFLRCxBQUtHLEFBS0osV0FDTyxDQVZBLEdBS0YsY0FNakIsQ0FUQSxDQUlpQixnQkFDakIsMkJBWndCLDZHQUNSLGVBQ2hCIiwiZmlsZSI6IkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2FudGQnXHJcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgUmVwbyBmcm9tICcuLi9jb21wb25lbnRzL1JlcG8nXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBJbmRleCh7IGRhdGEgfSkge1xyXG5cdGNvbnN0IHVzZXIgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS51c2VyKVxyXG5cdGxldCB1c2VyUmVwb3MgPSBbXVxyXG5cdHVzZUVmZmVjdCgoKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZygndXNlRWZmZWN0IGNhbGxlZCcpXHJcblx0XHQoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBhcGkucmVxdWVzdChcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR1cmw6ICcvdXNlci9yZXBvcydcclxuXHRcdFx0XHR9LCBcclxuXHRcdFx0KVxyXG5cdFx0XHR1c2VyUmVwb3MgPSByZXN1bHQuZGF0YVxyXG5cdFx0fSkoKVxyXG5cdH0sIFtdKVxyXG5cclxuXHRjb25zdCBCZWZvcmVMb2dpbiA9ICgpID0+IChcclxuXHRcdDw+XHJcblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG5cdFx0XHRcdDxCdXR0b24+5pyq55m75b2V77yM6K+354K55Ye755m75b2VPC9CdXR0b24+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0XHQ8c3R5bGUganN4PntgXHJcblx0XHRcdFx0LnJvb3Qge1xyXG5cdFx0XHRcdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdFx0XHRcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdGB9PC9zdHlsZT5cclxuXHRcdDwvPlxyXG5cdClcclxuXHRcclxuXHRpZiAoIXVzZXIgfHwgIXVzZXIuaWQpIHtcclxuXHRcdHJldHVybiA8QmVmb3JlTG9naW4gLz5cclxuXHR9XHJcblxyXG5cdHJldHVybiAoXHJcblx0XHQ8PlxyXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cclxuXHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInVzZXItaW5mb1wiPlxyXG5cdFx0XHRcdFx0PGltZyBzcmM9e3VzZXIuYXZhdGFyX3VybH0gYWx0PVwidXNlciBhdmF0YXJcIiBjbGFzc05hbWU9XCJ1c2VyLWF2YXRhclwiLz5cclxuXHRcdFx0XHRcdDxwIGNsYXNzTmFtZT1cInVzZXItbmFtZVwiPnt1c2VyLmxvZ2lufTwvcD5cclxuXHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0PC9kaXY+XHJcblx0XHRcdDxzdHlsZSBqc3g+e2BcclxuXHRcdFx0XHQucm9vdCB7XHJcblx0XHRcdFx0XHRkaXNwbGF5OiBmbGV4O1xyXG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcblx0XHRcdFx0XHRwYWRkaW5nOiAyMHB4IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC51c2VyLWluZm8ge1xyXG5cdFx0XHRcdFx0d2lkdGg6IDIwMHB4O1xyXG5cdFx0XHRcdFx0bWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG5cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0LnVzZXItbmFtZSB7XHJcblx0XHRcdFx0XHRmb250LXNpemU6IDIwcHg7XHJcblx0XHRcdFx0XHRmb250LXdlaWdodDogMzAwO1xyXG5cdFx0XHRcdFx0bWFyZ2luLXRvcDogMTBweDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0LnVzZXItYXZhdGFyIHtcclxuXHRcdFx0XHRcdHdpZHRoOiAxMDAlO1xyXG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogNHB4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0YH08L3N0eWxlPlxyXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInVzZXItcmVwb3NcIj5cclxuXHRcdFx0XHR7dXNlclJlcG9zLm1hcChyZXBvID0+IDxSZXBvIHJlcG89e3JlcG99Lz4pfVxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdDwvPlxyXG5cdClcclxufVxyXG5cclxuY29uc3QgYXBpID0gcmVxdWlyZSgnLi4vbGliL2FwaScpXHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gdW5kZWZpbmVkXHJcblxyXG4vL+iwg+eUqO+8miDmnI3liqHnq6/muLLmn5NpbmRleOaXtiAv5a6i5oi356uv5a+86Iiq5YiwaW5kZXjml7ZcclxuSW5kZXguZ2V0SW5pdGl0YWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XHJcbiAgICAvL+a1j+iniOWZqOeOr+Wig++8miBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpXHJcbiAgICAvL25vZGXnjq/looPvvJogYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwJylcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXJsOiAnL3VzZXIvcmVwb3MnXHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgY3R4LnJlcSwgXHJcbiAgICAgICAgY3R4LnJlc1xyXG4gICAgKVxyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiByZXN1bHQuZGF0YVxyXG4gICAgfVxyXG59XHJcblxyXG4iXX0= */\\n/*@ sourceURL=D:\\\\\\\\\\u7F16\\u7A0B\\\\\\\\\\u9879\\u76EE\\\\\\\\next\\u9879\\u76EE\\\\\\\\next-github\\\\\\\\pages\\\\\\\\index.js */\"), __jsx(\"div\", {\n    className: \"jsx-331183154\" + \" \" + \"user-repos\"\n  }, userRepos.map(function (repo) {\n    return __jsx(Repo, {\n      repo: repo\n    });\n  })));\n}\n\nvar api = require('../lib/api');\n\nvar isServer = false; //调用： 服务端渲染index时 /客户端导航到index时\n\nIndex.getInititalProps = function _callee2(_ref2) {\n  var ctx, reduxStore, result;\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          ctx = _ref2.ctx, reduxStore = _ref2.reduxStore;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(api.request({\n            url: '/user/repos'\n          }, ctx.req, ctx.res));\n\n        case 3:\n          result = _context2.sent;\n          console.log(result);\n          return _context2.abrupt(\"return\", {\n            data: result.data\n          });\n\n        case 6:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};","map":{"version":3,"sources":["D:/编程/项目/next项目/next-github/pages/index.js"],"names":["useSelector","useEffect","Repo","Index","data","user","state","userRepos","console","log","api","request","url","result","BeforeLogin","id","avatar_url","login","map","repo","require","isServer","getInititalProps","ctx","reduxStore","req","res"],"mappings":";;;;;AAAA,SAASA,WAAT,QAA4B,aAA5B;AAEA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AAEA,eAAe,SAASC,KAAT,OAAyB;AAAA,MAARC,IAAQ,QAARA,IAAQ;AACvC,MAAMC,IAAI,GAAGL,WAAW,CAAC,UAAAM,KAAK;AAAA,WAAIA,KAAK,CAACD,IAAV;AAAA,GAAN,CAAxB;AACA,MAAIE,SAAS,GAAG,EAAhB;AACAN,EAAAA,SAAS,CAAC,YAAM;AACfO,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CACqBC,GAAG,CAACC,OAAJ,CACpB;AACCC,gBAAAA,GAAG,EAAE;AADN,eADoB,CADrB;;AAAA;AACMC,cAAAA,MADN;AAMAN,cAAAA,SAAS,GAAGM,MAAM,CAACT,IAAnB;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADD;AASA,GAVQ,EAUN,EAVM,CAAT;;AAYA,MAAMU,WAAW,GAAG,SAAdA,WAAc;AAAA,WACnB,4BACC;AAAA,yCAAe;AAAf,OACC,8EADD,CADD;AAAA;AAAA,49HADmB;AAAA,GAApB;;AAeA,MAAI,CAACT,IAAD,IAAS,CAACA,IAAI,CAACU,EAAnB,EAAuB;AACtB,WAAO,MAAC,WAAD,OAAP;AACA;;AAED,SACC,4BACC;AAAA,uCAAe;AAAf,KACC;AAAA,uCAAe;AAAf,KACC;AAAK,IAAA,GAAG,EAAEV,IAAI,CAACW,UAAf;AAA2B,IAAA,GAAG,EAAC,aAA/B;AAAA,uCAAuD;AAAvD,IADD,EAEC;AAAA,uCAAa;AAAb,KAA0BX,IAAI,CAACY,KAA/B,CAFD,CADD,CADD;AAAA;AAAA,ypIA4BC;AAAA,uCAAe;AAAf,KACEV,SAAS,CAACW,GAAV,CAAc,UAAAC,IAAI;AAAA,WAAI,MAAC,IAAD;AAAM,MAAA,IAAI,EAAEA;AAAZ,MAAJ;AAAA,GAAlB,CADF,CA5BD,CADD;AAkCA;;AAED,IAAMT,GAAG,GAAGU,OAAO,CAAC,YAAD,CAAnB;;AACA,IAAMC,QAAQ,QAAd,C,CAEA;;AACAlB,KAAK,CAACmB,gBAAN,GAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,UAAAA,GAAT,SAASA,GAAT,EAAcC,UAAd,SAAcA,UAAd;AAAA;AAAA,2CAGAd,GAAG,CAACC,OAAJ,CACjB;AACIC,YAAAA,GAAG,EAAE;AADT,WADiB,EAIjBW,GAAG,CAACE,GAJa,EAKjBF,GAAG,CAACG,GALa,CAHA;;AAAA;AAGfb,UAAAA,MAHe;AAUrBL,UAAAA,OAAO,CAACC,GAAR,CAAYI,MAAZ;AAVqB,4CAWd;AACHT,YAAAA,IAAI,EAAES,MAAM,CAACT;AADV,WAXc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAzB","sourcesContent":["import { useSelector } from 'react-redux'\r\nimport { Button } from 'antd'\r\nimport { useEffect } from 'react'\r\nimport Repo from '../components/Repo'\r\n\r\nexport default function Index({ data }) {\r\n\tconst user = useSelector(state => state.user)\r\n\tlet userRepos = []\r\n\tuseEffect(() => {\r\n\t\tconsole.log('useEffect called')\r\n\t\t(async () => {\r\n\t\t\tconst result = await api.request(\r\n\t\t\t\t{\r\n\t\t\t\t\turl: '/user/repos'\r\n\t\t\t\t}, \r\n\t\t\t)\r\n\t\t\tuserRepos = result.data\r\n\t\t})()\r\n\t}, [])\r\n\r\n\tconst BeforeLogin = () => (\r\n\t\t<>\r\n\t\t\t<div className=\"root\">\r\n\t\t\t\t<Button>未登录，请点击登录</Button>\r\n\t\t\t</div>\r\n\t\t\t<style jsx>{`\r\n\t\t\t\t.root {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\t\t\t`}</style>\r\n\t\t</>\r\n\t)\r\n\t\r\n\tif (!user || !user.id) {\r\n\t\treturn <BeforeLogin />\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"root\">\r\n\t\t\t\t<div className=\"user-info\">\r\n\t\t\t\t\t<img src={user.avatar_url} alt=\"user avatar\" className=\"user-avatar\"/>\r\n\t\t\t\t\t<p className=\"user-name\">{user.login}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<style jsx>{`\r\n\t\t\t\t.root {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: flex-start;\r\n\t\t\t\t\tpadding: 20px 0;\r\n\t\t\t\t}\r\n\t\t\t\t.user-info {\r\n\t\t\t\t\twidth: 200px;\r\n\t\t\t\t\tmargin-right: 40px;\r\n\r\n\t\t\t\t}\r\n\t\t\t\t.user-name {\r\n\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\tfont-weight: 300;\r\n\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t}\r\n\t\t\t\t.user-avatar {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tborder-radius: 4px;\r\n\t\t\t\t}\r\n\t\t\t`}</style>\r\n\t\t\t<div className=\"user-repos\">\r\n\t\t\t\t{userRepos.map(repo => <Repo repo={repo}/>)}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nconst api = require('../lib/api')\r\nconst isServer = typeof window === undefined\r\n\r\n//调用： 服务端渲染index时 /客户端导航到index时\r\nIndex.getInititalProps = async ({ ctx, reduxStore }) => {\r\n    //浏览器环境： axios.get('http://localhost:3000')\r\n    //node环境： axios.get('http://localhost:80')\r\n    const result = await api.request(\r\n        {\r\n            url: '/user/repos'\r\n        }, \r\n        ctx.req, \r\n        ctx.res\r\n    )\r\n    console.log(result)\r\n    return {\r\n        data: result.data\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}