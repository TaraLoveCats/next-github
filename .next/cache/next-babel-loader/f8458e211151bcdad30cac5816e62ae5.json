{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Row from \"antd/lib/row\";\nimport _Pagination from \"antd/lib/pagination\";\nimport _Statistic from \"antd/lib/statistic\";\nimport _Col from \"antd/lib/col\";\nimport _List from \"antd/lib/list\";\nimport _Icon from \"antd/lib/icon\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from 'next/router';\nimport { memo, isValidElement, useEffect } from 'react';\nimport Link from 'next/link';\nimport Repo from '../components/Repo';\nimport data from '../testData';\nimport { cacheArray } from '../lib/repo-basic-cache';\n\nvar api = require('../lib/api');\n\nvar LANGUAGES = ['JavaScript', 'TypeScript', 'HTML', 'CSS', 'Java', 'Rust', 'Python', 'C#', 'Swift', 'C++', 'C'];\nvar SORT_TYPES = [{\n  name: 'Best Match'\n}, {\n  name: 'Most Stars',\n  value: 'stars',\n  order: 'desc'\n}, {\n  name: 'Fewest Stars',\n  value: 'stars',\n  order: 'asc'\n}, {\n  name: 'Most Forks',\n  value: 'forks',\n  order: 'desc'\n}, {\n  name: 'Fewest Forks',\n  value: 'forks',\n  order: 'asc'\n}];\nvar per_page = 10;\nvar selectedItemStyle = {\n  borderLeft: '2px solid #e36209',\n  fontWeight: 100\n};\nvar initRepos = {\n  total_count: 0,\n  items: []\n};\nvar isServer = false;\n\nfunction noop() {}\n\nvar FilterLink = memo(function (_ref) {\n  var name = _ref.name,\n      q = _ref.q,\n      lang = _ref.lang,\n      sort = _ref.sort,\n      order = _ref.order,\n      page = _ref.page;\n  var queryString = \"?q=\".concat(q);\n  lang && (queryString += \"&lang=\".concat(lang));\n  sort && (queryString += \"&sort=\".concat(sort, \"&order=\").concat(order || 'desc'));\n  page && (queryString += \"&page=\".concat(page));\n  queryString += \"&per_page=\".concat(per_page);\n  return __jsx(Link, {\n    href: \"/search\".concat(queryString)\n  }, isValidElement(name) ? name : __jsx(\"a\", null, name));\n});\nexport default function Search(_ref2) {\n  var _ref2$repos = _ref2.repos,\n      repos = _ref2$repos === void 0 ? initRepos : _ref2$repos,\n      colors = _ref2.colors;\n  var router = useRouter();\n\n  var querys = _extends({}, router.query);\n\n  var _router$query = router.query,\n      sort = _router$query.sort,\n      order = _router$query.order,\n      lang = _router$query.lang,\n      page = _router$query.page;\n  useEffect(function () {\n    if (!isServer) {\n      cacheArray(repos.items);\n    }\n  });\n  return __jsx(\"div\", {\n    className: \"jsx-2076330023\" + \" \" + \"root\"\n  }, __jsx(_Row, {\n    gutter: 20\n  }, __jsx(_Col, {\n    span: 6\n  }, __jsx(_List, {\n    bordered: true,\n    header: __jsx(\"span\", {\n      className: \"jsx-2076330023\" + \" \" + \"list-header\"\n    }, \"Languages\"),\n    style: {\n      marginBottom: 20\n    },\n    dataSource: LANGUAGES,\n    renderItem: function renderItem(item) {\n      var selected = item === lang;\n      return __jsx(_List.Item, {\n        style: selected ? selectedItemStyle : null\n      }, __jsx(\"div\", {\n        className: \"jsx-2076330023\" + \" \" + \"list-item\"\n      }, selected ? __jsx(\"div\", {\n        className: \"jsx-2076330023\"\n      }, __jsx(\"span\", {\n        className: \"jsx-2076330023\"\n      }, item), __jsx(\"span\", {\n        className: \"jsx-2076330023\" + \" \" + \"close-circle\"\n      }, __jsx(_Icon, {\n        type: \"close-circle\",\n        theme: \"filled\"\n      }))) : __jsx(FilterLink, _extends({}, querys, {\n        lang: item,\n        name: item\n      }))));\n    }\n  }), __jsx(_List, {\n    bordered: true,\n    header: __jsx(\"span\", {\n      className: \"jsx-2076330023\" + \" \" + \"list-header\"\n    }, \"Sort By\"),\n    dataSource: SORT_TYPES,\n    renderItem: function renderItem(item) {\n      var selected = false;\n\n      if (item.name === 'Best Match' && !sort) {\n        selected = true;\n      } else if (item.value === sort && item.order === order) {\n        selected = true;\n      }\n\n      return __jsx(_List.Item, {\n        style: selected ? selectedItemStyle : null\n      }, selected ? __jsx(\"span\", {\n        className: \"jsx-2076330023\"\n      }, item.name) : __jsx(FilterLink, _extends({}, querys, {\n        name: item.name,\n        sort: item.value,\n        order: item.order\n      })));\n    }\n  })), __jsx(_Col, {\n    span: 18\n  }, __jsx(\"h3\", {\n    className: \"jsx-2076330023\" + \" \" + \"repos-title\"\n  }, __jsx(_Statistic, {\n    value: repos.total_count\n  }), __jsx(\"span\", {\n    className: \"jsx-2076330023\"\n  }, \"\\xA0repository results\")), repos.items.map(function (repo) {\n    return __jsx(Repo, {\n      repo: repo,\n      key: repo.id,\n      colors: colors\n    });\n  }), __jsx(\"div\", {\n    className: \"jsx-2076330023\" + \" \" + \"pagination\"\n  }, __jsx(_Pagination, {\n    pageSize: per_page,\n    current: +page || 1,\n    total: 1000 //github限制返回1000条\n    ,\n    onChange: noop,\n    itemRender: function itemRender(page, type, ol) {\n      var p = type === 'page' ? page : type === 'prev' ? page - 1 : page + 1;\n      var name = type === 'page' ? page : ol;\n      return __jsx(FilterLink, _extends({}, querys, {\n        page: p,\n        name: name\n      }));\n    }\n  })))), __jsx(_JSXStyle, {\n    id: \"2076330023\"\n  }, \".root.jsx-2076330023{padding:30px 0;}.repos-title.jsx-2076330023{border-bottom:1px solid #ddd;font-size:24px;line-height:1.5;padding-bottom:20px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}.list-header.jsx-2076330023{font-weight:700;font-size:16px;}.list-item.jsx-2076330023{position:relative;}.close-circle.jsx-2076330023{position:absolute;right:20px;top:20px;}.pagination.jsx-2076330023{padding:20px;text-align:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxzZWFyY2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0t3QixBQUdvQyxBQUdjLEFBUWIsQUFJRSxBQUdBLEFBS0wsYUFDSyxFQXZCdEIsQ0FXbUIsRUFJbkIsQUFHZSxXQWZJLEFBZ0JOLEVBUGIsQUFZQSxPQUpBLE1BaEJvQixnQkFDSSxvQkFDUCwwRUFDYyx5R0FDL0IiLCJmaWxlIjoiRDpcXOe8lueoi1xc6aG555uuXFxuZXh06aG555uuXFxuZXh0LWdpdGh1YlxccGFnZXNcXHNlYXJjaC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xyXG5pbXBvcnQgeyBtZW1vLCBpc1ZhbGlkRWxlbWVudCwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCB7IFJvdywgQ29sLCBMaXN0LCBQYWdpbmF0aW9uLCBTdGF0aXN0aWMsIEljb24gfSBmcm9tICdhbnRkJ1xyXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnXHJcbmltcG9ydCBSZXBvIGZyb20gJy4uL2NvbXBvbmVudHMvUmVwbydcclxuaW1wb3J0IGRhdGEgZnJvbSAnLi4vdGVzdERhdGEnXHJcbmltcG9ydCB7IGNhY2hlQXJyYXkgfSBmcm9tICcuLi9saWIvcmVwby1iYXNpYy1jYWNoZSdcclxuY29uc3QgYXBpID0gcmVxdWlyZSgnLi4vbGliL2FwaScpXHJcblxyXG5jb25zdCBMQU5HVUFHRVMgPSBbJ0phdmFTY3JpcHQnLCAnVHlwZVNjcmlwdCcsICdIVE1MJywgJ0NTUycsICdKYXZhJywgJ1J1c3QnLCAnUHl0aG9uJywgJ0MjJywgJ1N3aWZ0JywgJ0MrKycsICdDJ107XHJcbmNvbnN0IFNPUlRfVFlQRVMgPSBbXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0Jlc3QgTWF0Y2gnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnTW9zdCBTdGFycycsXHJcbiAgICAgICAgdmFsdWU6ICdzdGFycycsXHJcbiAgICAgICAgb3JkZXI6ICdkZXNjJyxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0Zld2VzdCBTdGFycycsXHJcbiAgICAgICAgdmFsdWU6ICdzdGFycycsXHJcbiAgICAgICAgb3JkZXI6ICdhc2MnLFxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBuYW1lOiAnTW9zdCBGb3JrcycsXHJcbiAgICAgICAgdmFsdWU6ICdmb3JrcycsXHJcbiAgICAgICAgb3JkZXI6ICdkZXNjJyxcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgbmFtZTogJ0Zld2VzdCBGb3JrcycsXHJcbiAgICAgICAgdmFsdWU6ICdmb3JrcycsXHJcbiAgICAgICAgb3JkZXI6ICdhc2MnLFxyXG4gICAgfSxcclxuXTtcclxuY29uc3QgcGVyX3BhZ2UgPSAxMDtcclxuY29uc3Qgc2VsZWN0ZWRJdGVtU3R5bGUgPSB7XHJcbiAgICBib3JkZXJMZWZ0OiAnMnB4IHNvbGlkICNlMzYyMDknLFxyXG4gICAgZm9udFdlaWdodDogMTAwLFxyXG59XHJcbmNvbnN0IGluaXRSZXBvcyA9IHtcclxuICAgIHRvdGFsX2NvdW50OiAwLFxyXG4gICAgaXRlbXM6IFtdXHJcbn07XHJcbmNvbnN0IGlzU2VydmVyID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCc7XHJcbmZ1bmN0aW9uIG5vb3AoKSB7IH1cclxuXHJcbmNvbnN0IEZpbHRlckxpbmsgPSBtZW1vKCh7IG5hbWUsIHEsIGxhbmcsIHNvcnQsIG9yZGVyLCBwYWdlIH0pID0+IHtcclxuICAgIGxldCBxdWVyeVN0cmluZyA9IGA/cT0ke3F9YDtcclxuICAgIGxhbmcgJiYgKHF1ZXJ5U3RyaW5nICs9IGAmbGFuZz0ke2xhbmd9YCk7XHJcbiAgICBzb3J0ICYmIChxdWVyeVN0cmluZyArPSBgJnNvcnQ9JHtzb3J0fSZvcmRlcj0ke29yZGVyIHx8ICdkZXNjJ31gKTtcclxuICAgIHBhZ2UgJiYgKHF1ZXJ5U3RyaW5nICs9IGAmcGFnZT0ke3BhZ2V9YCk7XHJcbiAgICBxdWVyeVN0cmluZyArPSBgJnBlcl9wYWdlPSR7cGVyX3BhZ2V9YDtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxMaW5rIGhyZWY9e2Avc2VhcmNoJHtxdWVyeVN0cmluZ31gfT5cclxuICAgICAgICAgICAge2lzVmFsaWRFbGVtZW50KG5hbWUpID8gbmFtZSA6IDxhPntuYW1lfTwvYT59XHJcbiAgICAgICAgPC9MaW5rPlxyXG4gICAgKVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNlYXJjaCh7IHJlcG9zID0gaW5pdFJlcG9zLCBjb2xvcnMgfSkge1xyXG4gICAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcbiAgICBjb25zdCB7IC4uLnF1ZXJ5cyB9ID0gcm91dGVyLnF1ZXJ5O1xyXG4gICAgY29uc3QgeyBzb3J0LCBvcmRlciwgbGFuZywgcGFnZSB9ID0gcm91dGVyLnF1ZXJ5O1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFpc1NlcnZlcikge1xyXG4gICAgICAgICAgICBjYWNoZUFycmF5KHJlcG9zLml0ZW1zKVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG4gICAgICAgICAgICA8Um93IGd1dHRlcj17MjB9PlxyXG4gICAgICAgICAgICAgICAgPENvbCBzcGFuPXs2fT5cclxuICAgICAgICAgICAgICAgICAgICA8TGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9ezxzcGFuIGNsYXNzTmFtZT1cImxpc3QtaGVhZGVyXCI+TGFuZ3VhZ2VzPC9zcGFuPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAyMCB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhU291cmNlPXtMQU5HVUFHRVN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckl0ZW09e2l0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBpdGVtID09PSBsYW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0Lkl0ZW0gc3R5bGU9e3NlbGVjdGVkID8gc2VsZWN0ZWRJdGVtU3R5bGUgOiBudWxsfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaXN0LWl0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2l0ZW19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjbG9zZS1jaXJjbGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIHR5cGU9XCJjbG9zZS1jaXJjbGVcIiB0aGVtZT1cImZpbGxlZFwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEZpbHRlckxpbmtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnF1ZXJ5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZz17aXRlbX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17aXRlbX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpc3QuSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG5cclxuICAgICAgICAgICAgICAgICAgICA8TGlzdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI9ezxzcGFuIGNsYXNzTmFtZT1cImxpc3QtaGVhZGVyXCI+U29ydCBCeTwvc3Bhbj59XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTb3VyY2U9e1NPUlRfVFlQRVN9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckl0ZW09e2l0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSAnQmVzdCBNYXRjaCcgJiYgIXNvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0udmFsdWUgPT09IHNvcnQgJiYgaXRlbS5vcmRlciA9PT0gb3JkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaXN0Lkl0ZW0gc3R5bGU9e3NlbGVjdGVkID8gc2VsZWN0ZWRJdGVtU3R5bGUgOiBudWxsfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3NlbGVjdGVkID8gPHNwYW4+e2l0ZW0ubmFtZX08L3NwYW4+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxGaWx0ZXJMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnF1ZXJ5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtpdGVtLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydD17aXRlbS52YWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcj17aXRlbS5vcmRlcn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpc3QuSXRlbT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgPC9Db2w+XHJcbiAgICAgICAgICAgICAgICA8Q29sIHNwYW49ezE4fT5cclxuICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwicmVwb3MtdGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPFN0YXRpc3RpYyB2YWx1ZT17cmVwb3MudG90YWxfY291bnR9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiZuYnNwO3JlcG9zaXRvcnkgcmVzdWx0czwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIHtyZXBvcy5pdGVtcy5tYXAocmVwbyA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG99IGtleT17cmVwby5pZH0gY29sb3JzPXtjb2xvcnN9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgKSl9XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdpbmF0aW9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxQYWdpbmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlU2l6ZT17cGVyX3BhZ2V9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50PXsrcGFnZSB8fCAxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG90YWw9ezEwMDB9IC8vZ2l0aHVi6ZmQ5Yi26L+U5ZueMTAwMOadoVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e25vb3B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtUmVuZGVyPXsocGFnZSwgdHlwZSwgb2wpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwID0gdHlwZSA9PT0gJ3BhZ2UnID8gcGFnZSA6IHR5cGUgPT09ICdwcmV2JyA/IHBhZ2UgLSAxIDogcGFnZSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHR5cGUgPT09ICdwYWdlJyA/IHBhZ2UgOiBvbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RmlsdGVyTGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey4uLnF1ZXJ5c31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U9e3B9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtuYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L0NvbD5cclxuICAgICAgICAgICAgPC9Sb3c+XHJcbiAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgIC5yb290IHtcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAzMHB4IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAucmVwb3MtdGl0bGUge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmxpc3QtaGVhZGVyIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNzAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5saXN0LWl0ZW0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5jbG9zZS1jaXJjbGUge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgICByaWdodDogMjBweDtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDIwcHg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAucGFnaW5hdGlvbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIClcclxufVxyXG5cclxuU2VhcmNoLmdldEluaXRpYWxQcm9wcyA9IGFzeW5jICh7IHF1ZXJ5LCByZXEsIHJlcyB9KSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZygnU2VhcmNoIGdldEluaXRpYWxQcm9wcyBjYWxsZWQnKTtcclxuICAgIGNvbnN0IHsgcSwgc29ydCwgbGFuZywgb3JkZXIsIHBhZ2UgfSA9IHF1ZXJ5XHJcbiAgICBpZiAoIXEpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXBvczogaW5pdFJlcG9zXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gP3E9cmVhY3QrbGFuZ3VhZ2U6amF2YXNjcmlwdCZzb3J0PXN0YXJzJm9yZGVyPWRlc2MmcGFnZT0yXHJcbiAgICBsZXQgcXVlcnlTdHJpbmcgPSBgP3E9JHtxfWA7XHJcbiAgICBsYW5nICYmIChxdWVyeVN0cmluZyArPSBgK2xhbmd1YWdlOiR7bGFuZ31gKTtcclxuICAgIHNvcnQgJiYgKHF1ZXJ5U3RyaW5nICs9IGAmc29ydD0ke3NvcnR9Jm9yZGVyPSR7b3JkZXIgfHwgJ2Rlc2MnfWApO1xyXG4gICAgcGFnZSAmJiAocXVlcnlTdHJpbmcgKz0gYCZwYWdlPSR7cGFnZX1gKTtcclxuICAgIHF1ZXJ5U3RyaW5nICs9IGAmcGVyX3BhZ2U9JHtwZXJfcGFnZX1gO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaS5yZXF1ZXN0KHtcclxuICAgICAgICB1cmw6IGAvc2VhcmNoL3JlcG9zaXRvcmllcyR7cXVlcnlTdHJpbmd9YFxyXG4gICAgfSwgcmVxLCByZXMpXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXBvczogcmVzdWx0LmRhdGEgfHwgZGF0YS5yZWFjdF9yZXBvc1xyXG4gICAgfVxyXG59Il19 */\\n/*@ sourceURL=D:\\\\\\\\\\u7F16\\u7A0B\\\\\\\\\\u9879\\u76EE\\\\\\\\next\\u9879\\u76EE\\\\\\\\next-github\\\\\\\\pages\\\\\\\\search.js */\"));\n}\n\nSearch.getInitialProps = function _callee(_ref3) {\n  var query, req, res, q, sort, lang, order, page, queryString, result;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          query = _ref3.query, req = _ref3.req, res = _ref3.res;\n          console.log('Search getInitialProps called');\n          q = query.q, sort = query.sort, lang = query.lang, order = query.order, page = query.page;\n\n          if (q) {\n            _context.next = 5;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            repos: initRepos\n          });\n\n        case 5:\n          // ?q=react+language:javascript&sort=stars&order=desc&page=2\n          queryString = \"?q=\".concat(q);\n          lang && (queryString += \"+language:\".concat(lang));\n          sort && (queryString += \"&sort=\".concat(sort, \"&order=\").concat(order || 'desc'));\n          page && (queryString += \"&page=\".concat(page));\n          queryString += \"&per_page=\".concat(per_page);\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(api.request({\n            url: \"/search/repositories\".concat(queryString)\n          }, req, res));\n\n        case 12:\n          result = _context.sent;\n          return _context.abrupt(\"return\", {\n            repos: result.data || data.react_repos\n          });\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};","map":{"version":3,"sources":["D:/编程/项目/next项目/next-github/pages/search.js"],"names":["useRouter","memo","isValidElement","useEffect","Link","Repo","data","cacheArray","api","require","LANGUAGES","SORT_TYPES","name","value","order","per_page","selectedItemStyle","borderLeft","fontWeight","initRepos","total_count","items","isServer","noop","FilterLink","q","lang","sort","page","queryString","Search","repos","colors","router","querys","query","marginBottom","item","selected","map","repo","id","type","ol","p","getInitialProps","req","res","console","log","request","url","result","react_repos"],"mappings":"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","sourcesContent":["import { useRouter } from 'next/router'\r\nimport { memo, isValidElement, useEffect } from 'react'\r\nimport { Row, Col, List, Pagination, Statistic, Icon } from 'antd'\r\nimport Link from 'next/link'\r\nimport Repo from '../components/Repo'\r\nimport data from '../testData'\r\nimport { cacheArray } from '../lib/repo-basic-cache'\r\nconst api = require('../lib/api')\r\n\r\nconst LANGUAGES = ['JavaScript', 'TypeScript', 'HTML', 'CSS', 'Java', 'Rust', 'Python', 'C#', 'Swift', 'C++', 'C'];\r\nconst SORT_TYPES = [\r\n    {\r\n        name: 'Best Match',\r\n    },\r\n    {\r\n        name: 'Most Stars',\r\n        value: 'stars',\r\n        order: 'desc',\r\n    },\r\n    {\r\n        name: 'Fewest Stars',\r\n        value: 'stars',\r\n        order: 'asc',\r\n    },\r\n    {\r\n        name: 'Most Forks',\r\n        value: 'forks',\r\n        order: 'desc',\r\n    },\r\n    {\r\n        name: 'Fewest Forks',\r\n        value: 'forks',\r\n        order: 'asc',\r\n    },\r\n];\r\nconst per_page = 10;\r\nconst selectedItemStyle = {\r\n    borderLeft: '2px solid #e36209',\r\n    fontWeight: 100,\r\n}\r\nconst initRepos = {\r\n    total_count: 0,\r\n    items: []\r\n};\r\nconst isServer = typeof window === 'undefined';\r\nfunction noop() { }\r\n\r\nconst FilterLink = memo(({ name, q, lang, sort, order, page }) => {\r\n    let queryString = `?q=${q}`;\r\n    lang && (queryString += `&lang=${lang}`);\r\n    sort && (queryString += `&sort=${sort}&order=${order || 'desc'}`);\r\n    page && (queryString += `&page=${page}`);\r\n    queryString += `&per_page=${per_page}`;\r\n\r\n    return (\r\n        <Link href={`/search${queryString}`}>\r\n            {isValidElement(name) ? name : <a>{name}</a>}\r\n        </Link>\r\n    )\r\n});\r\n\r\nexport default function Search({ repos = initRepos, colors }) {\r\n    const router = useRouter();\r\n    const { ...querys } = router.query;\r\n    const { sort, order, lang, page } = router.query;\r\n\r\n    useEffect(() => {\r\n        if (!isServer) {\r\n            cacheArray(repos.items)\r\n        }\r\n    })\r\n    return (\r\n        <div className=\"root\">\r\n            <Row gutter={20}>\r\n                <Col span={6}>\r\n                    <List\r\n                        bordered\r\n                        header={<span className=\"list-header\">Languages</span>}\r\n                        style={{ marginBottom: 20 }}\r\n                        dataSource={LANGUAGES}\r\n                        renderItem={item => {\r\n                            const selected = item === lang;\r\n                            return (                                \r\n                                <List.Item style={selected ? selectedItemStyle : null}>\r\n                                    <div className=\"list-item\">\r\n                                        {selected ?\r\n                                            <div>\r\n                                                <span>{item}</span>\r\n                                                <span className=\"close-circle\">\r\n                                                    <Icon type=\"close-circle\" theme=\"filled\" />\r\n                                                </span>\r\n                                            </div>\r\n                                            :\r\n                                            <FilterLink\r\n                                                {...querys}\r\n                                                lang={item}\r\n                                                name={item}\r\n                                            />\r\n                                        }\r\n                                    </div>\r\n                                </List.Item>\r\n                            )\r\n                        }}\r\n                    />\r\n\r\n                    <List\r\n                        bordered\r\n                        header={<span className=\"list-header\">Sort By</span>}\r\n                        dataSource={SORT_TYPES}\r\n                        renderItem={item => {\r\n                            let selected = false;\r\n                            if (item.name === 'Best Match' && !sort) {\r\n                                selected = true;\r\n                            } else if (item.value === sort && item.order === order) {\r\n                                selected = true;\r\n                            }\r\n                            return (\r\n                                <List.Item style={selected ? selectedItemStyle : null}>\r\n                                    {selected ? <span>{item.name}</span> :\r\n                                        <FilterLink\r\n                                            {...querys}\r\n                                            name={item.name}\r\n                                            sort={item.value}\r\n                                            order={item.order}\r\n                                        />\r\n                                    }\r\n                                </List.Item>\r\n                            )\r\n                        }}\r\n                    />\r\n                </Col>\r\n                <Col span={18}>\r\n                    <h3 className=\"repos-title\">\r\n                        <Statistic value={repos.total_count} />\r\n                        <span>&nbsp;repository results</span>\r\n                    </h3>\r\n                    {repos.items.map(repo => (\r\n                        <Repo repo={repo} key={repo.id} colors={colors} />\r\n                    ))}\r\n                    <div className=\"pagination\">\r\n                        <Pagination\r\n                            pageSize={per_page}\r\n                            current={+page || 1}\r\n                            total={1000} //github限制返回1000条\r\n                            onChange={noop}\r\n                            itemRender={(page, type, ol) => {\r\n                                const p = type === 'page' ? page : type === 'prev' ? page - 1 : page + 1;\r\n                                const name = type === 'page' ? page : ol;\r\n                                return (\r\n                                    <FilterLink\r\n                                        {...querys}\r\n                                        page={p}\r\n                                        name={name}\r\n                                    />\r\n                                )\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n            <style jsx>{`\r\n                .root {\r\n                    padding: 30px 0;\r\n                }\r\n                .repos-title {\r\n                    border-bottom: 1px solid #ddd;\r\n                    font-size: 24px;\r\n                    line-height: 1.5;\r\n                    padding-bottom: 20px;\r\n                    display: flex;\r\n                    justify-content: flex-start;\r\n                }\r\n                .list-header {\r\n                    font-weight: 700;\r\n                    font-size: 16px;\r\n                }\r\n                .list-item {\r\n                    position: relative;\r\n                }\r\n                .close-circle {\r\n                    position: absolute;\r\n                    right: 20px;\r\n                    top: 20px;\r\n                }\r\n                .pagination {\r\n                    padding: 20px;\r\n                    text-align: center;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    )\r\n}\r\n\r\nSearch.getInitialProps = async ({ query, req, res }) => {\r\n    console.log('Search getInitialProps called');\r\n    const { q, sort, lang, order, page } = query\r\n    if (!q) {\r\n        return {\r\n            repos: initRepos\r\n        }\r\n    }\r\n    // ?q=react+language:javascript&sort=stars&order=desc&page=2\r\n    let queryString = `?q=${q}`;\r\n    lang && (queryString += `+language:${lang}`);\r\n    sort && (queryString += `&sort=${sort}&order=${order || 'desc'}`);\r\n    page && (queryString += `&page=${page}`);\r\n    queryString += `&per_page=${per_page}`;\r\n\r\n    const result = await api.request({\r\n        url: `/search/repositories${queryString}`\r\n    }, req, res)\r\n\r\n    return {\r\n        repos: result.data || data.react_repos\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}