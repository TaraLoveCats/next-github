{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Spin from \"antd/lib/spin\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport App from 'next/app';\nimport 'antd/dist/antd.css'; //add global css\n\nimport Layout from '../components/Layout';\nimport { Provider } from 'react-redux';\nimport withRedux from '../lib/with-redux';\nimport Router from 'next/router';\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nvar colors = {};\n\nfunction MyApp(_ref) {\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps,\n      reduxStore = _ref.reduxStore;\n  console.log('My app rendering'); //Keeping state when navigating pages\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var startLoading = function startLoading() {\n    setLoading(true);\n  };\n\n  var stopLoading = function stopLoading() {\n    setLoading(false);\n  };\n\n  useEffect(function () {\n    Router.events.on('routeChangeStart', startLoading);\n    Router.events.on('routeChangeComplete', stopLoading);\n    Router.events.on('routeChangeError', stopLoading);\n    return function () {\n      Router.events.off('routeChangeStart', startLoading);\n      Router.events.off('routeChangeComplete', stopLoading);\n      Router.events.off('routeChangeError', stopLoading);\n    };\n  }, []);\n  useEffect(function () {\n    axios.get('/colors').then(function (resp) {\n      return colors = resp.data;\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }, []);\n  return __jsx(Provider, {\n    store: reduxStore\n  }, __jsx(Layout, null, __jsx(_Spin, {\n    tip: \"loading...\",\n    spinning: loading\n  }, __jsx(Component, _extends({}, pageProps, {\n    colors: colors\n  })))));\n} //define this method because blocking data requirements are needed\n//for every single page in this application\n\n\nMyApp.getInitialProps = function _callee(appContext) {\n  var appProps;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          console.log('app init'); //calls page's `getInitialProps` and fills `appProps.pageProps` \n\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(App.getInitialProps(appContext));\n\n        case 3:\n          appProps = _context.sent;\n          return _context.abrupt(\"return\", _objectSpread({}, appProps));\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default withRedux(MyApp);","map":{"version":3,"sources":["D:/编程/项目/next项目/next-github/pages/_app.js"],"names":["App","Layout","Provider","withRedux","Router","useState","useEffect","axios","colors","MyApp","Component","pageProps","reduxStore","console","log","loading","setLoading","startLoading","stopLoading","events","on","off","get","then","resp","data","err","getInitialProps","appContext","appProps"],"mappings":";;;;;;;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,UAAhB;AACA,OAAO,oBAAP,C,CAA4B;;AAC5B,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AAEA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAIC,MAAM,GAAG,EAAb;;AACA,SAASC,KAAT,OAAqD;AAAA,MAApCC,SAAoC,QAApCA,SAAoC;AAAA,MAAzBC,SAAyB,QAAzBA,SAAyB;AAAA,MAAdC,UAAc,QAAdA,UAAc;AACjDC,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EADiD,CAEjD;;AAFiD,kBAGnBT,QAAQ,CAAC,KAAD,CAHW;AAAA,MAG1CU,OAH0C;AAAA,MAGjCC,UAHiC;;AAKjD,MAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvBD,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH,GAFD;;AAGA,MAAME,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtBF,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GAFD;;AAIAV,EAAAA,SAAS,CAAC,YAAM;AACZF,IAAAA,MAAM,CAACe,MAAP,CAAcC,EAAd,CAAiB,kBAAjB,EAAqCH,YAArC;AACAb,IAAAA,MAAM,CAACe,MAAP,CAAcC,EAAd,CAAiB,qBAAjB,EAAwCF,WAAxC;AACAd,IAAAA,MAAM,CAACe,MAAP,CAAcC,EAAd,CAAiB,kBAAjB,EAAqCF,WAArC;AACA,WAAO,YAAM;AACTd,MAAAA,MAAM,CAACe,MAAP,CAAcE,GAAd,CAAkB,kBAAlB,EAAsCJ,YAAtC;AACAb,MAAAA,MAAM,CAACe,MAAP,CAAcE,GAAd,CAAkB,qBAAlB,EAAyCH,WAAzC;AACAd,MAAAA,MAAM,CAACe,MAAP,CAAcE,GAAd,CAAkB,kBAAlB,EAAsCH,WAAtC;AACH,KAJD;AAKH,GATQ,EASN,EATM,CAAT;AAWAZ,EAAAA,SAAS,CAAC,YAAM;AACZC,IAAAA,KAAK,CAACe,GAAN,CAAU,SAAV,EACKC,IADL,CACU,UAAAC,IAAI;AAAA,aAAIhB,MAAM,GAAGgB,IAAI,CAACC,IAAlB;AAAA,KADd,WAEW,UAAAC,GAAG;AAAA,aAAIb,OAAO,CAACC,GAAR,CAAYY,GAAZ,CAAJ;AAAA,KAFd;AAGH,GAJQ,EAIN,EAJM,CAAT;AAMA,SACI,MAAC,QAAD;AAAU,IAAA,KAAK,EAAEd;AAAjB,KAEI,MAAC,MAAD,QACI;AAAM,IAAA,GAAG,EAAC,YAAV;AAAuB,IAAA,QAAQ,EAAEG;AAAjC,KACI,MAAC,SAAD,eAAeJ,SAAf;AAA0B,IAAA,MAAM,EAAEH;AAAlC,KADJ,CADJ,CAFJ,CADJ;AAUH,C,CAGD;AACA;;;AACAC,KAAK,CAACkB,eAAN,GAAwB,iBAAOC,UAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBf,UAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EADoB,CAEpB;;AAFoB;AAAA,2CAGGd,GAAG,CAAC2B,eAAJ,CAAoBC,UAApB,CAHH;;AAAA;AAGdC,UAAAA,QAHc;AAAA,6DAMbA,QANa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;;AAUA,eAAe1B,SAAS,CAACM,KAAD,CAAxB","sourcesContent":["import App from 'next/app'\r\nimport 'antd/dist/antd.css' //add global css\r\nimport Layout from '../components/Layout'\r\nimport { Provider } from 'react-redux'  \r\nimport withRedux from '../lib/with-redux'\r\nimport Router from 'next/router'\r\nimport { Spin } from 'antd'\r\nimport { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\n\r\nlet colors = {};\r\nfunction MyApp({ Component, pageProps, reduxStore }) {\r\n    console.log('My app rendering');\r\n    //Keeping state when navigating pages\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const startLoading = () => {\r\n        setLoading(true)\r\n    }\r\n    const stopLoading = () => {\r\n        setLoading(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        Router.events.on('routeChangeStart', startLoading)\r\n        Router.events.on('routeChangeComplete', stopLoading)\r\n        Router.events.on('routeChangeError', stopLoading)\r\n        return () => {\r\n            Router.events.off('routeChangeStart', startLoading)\r\n            Router.events.off('routeChangeComplete', stopLoading)\r\n            Router.events.off('routeChangeError', stopLoading)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        axios.get('/colors')\r\n            .then(resp => colors = resp.data)\r\n            .catch(err => console.log(err))\r\n    }, [])\r\n\r\n    return (\r\n        <Provider store={reduxStore}>\r\n            {/* Persisting layout between page changes */}\r\n            <Layout>\r\n                <Spin tip=\"loading...\" spinning={loading}>\r\n                    <Component {...pageProps} colors={colors}/>\r\n                </Spin>\r\n            </Layout>\r\n        </Provider>\r\n    )\r\n}\r\n\r\n\r\n//define this method because blocking data requirements are needed\r\n//for every single page in this application\r\nMyApp.getInitialProps = async (appContext) => {\r\n    console.log('app init')\r\n    //calls page's `getInitialProps` and fills `appProps.pageProps` \r\n    const appProps = await App.getInitialProps(appContext);\r\n\r\n    return {\r\n        ...appProps,\r\n    }\r\n}\r\n\r\nexport default withRedux(MyApp)"]},"metadata":{},"sourceType":"module"}