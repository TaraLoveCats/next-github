{"ast":null,"code":"import _Button from \"antd/lib/button\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Tabs from \"antd/lib/tabs\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useSelector } from 'react-redux';\nimport { useState, useEffect } from 'react';\nimport Repo from '../components/Repo';\nimport config from '../config';\nvar OAUTH_URL = config.OAUTH_URL;\nvar TabPane = _Tabs.TabPane;\nexport default function Index(_ref) {\n  var data = _ref.data;\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n  var initLoggedIn = user && user.id;\n\n  var _useState = useState([]),\n      userRepos = _useState[0],\n      setUserRepos = _useState[1];\n\n  var _useState2 = useState([]),\n      userStarredRepos = _useState2[0],\n      setUserStarredRepos = _useState2[1];\n\n  var _useState3 = useState(initLoggedIn),\n      loggedIn = _useState3[0],\n      setLoggedIn = _useState3[1];\n\n  useEffect(function () {\n    if (loggedIn) {\n      (function _callee() {\n        var userRepos, userStarredRepos;\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(api.request({\n                  url: '/user/repos'\n                }));\n\n              case 2:\n                userRepos = _context.sent;\n                _context.next = 5;\n                return _regeneratorRuntime.awrap(api.request({\n                  url: '/user/starred'\n                }));\n\n              case 5:\n                userStarredRepos = _context.sent;\n                setUserRepos(userRepos.data);\n                setUserStarredRepos(userStarredRepos.data);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        });\n      })();\n    }\n  }, [loggedIn]);\n\n  var BeforeLogin = function BeforeLogin() {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"jsx-449660228\" + \" \" + \"root\"\n    }, __jsx(_Button, {\n      href: OAUTH_URL,\n      onClick: function onClick() {\n        return setLoggedIn(true);\n      }\n    }, \"\\u672A\\u767B\\u5F55\\uFF0C\\u8BF7\\u70B9\\u51FB\\u767B\\u5F55\")), __jsx(_JSXStyle, {\n      id: \"449660228\"\n    }, \".root.jsx-449660228{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5Q2UsQUFHbUIsMEVBQ1UsbUdBQ0osNkZBQ3BCIiwiZmlsZSI6IkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCB7IEJ1dHRvbiwgVGFicyB9IGZyb20gJ2FudGQnXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi4vY29tcG9uZW50cy9SZXBvJ1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmNvbnN0IHsgT0FVVEhfVVJMIH0gPSBjb25maWc7XHJcbmNvbnN0IHsgVGFiUGFuZSB9ID0gVGFicztcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW5kZXgoeyBkYXRhIH0pIHtcclxuICAgIGNvbnN0IHVzZXIgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS51c2VyKTtcclxuICAgIGNvbnN0IGluaXRMb2dnZWRJbiA9IHVzZXIgJiYgdXNlci5pZDtcclxuICAgIGNvbnN0IFt1c2VyUmVwb3MsIHNldFVzZXJSZXBvc10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgICBjb25zdCBbdXNlclN0YXJyZWRSZXBvcywgc2V0VXNlclN0YXJyZWRSZXBvc10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgICBjb25zdCBbbG9nZ2VkSW4sIHNldExvZ2dlZEluXSA9IHVzZVN0YXRlKGluaXRMb2dnZWRJbilcclxuXHJcblx0dXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAobG9nZ2VkSW4pIHsgXHJcbiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyUmVwb3MgPSBhd2FpdCBhcGkucmVxdWVzdChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJy91c2VyL3JlcG9zJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclN0YXJyZWRSZXBvcyA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3VzZXIvc3RhcnJlZCdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBzZXRVc2VyUmVwb3ModXNlclJlcG9zLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgc2V0VXNlclN0YXJyZWRSZXBvcyh1c2VyU3RhcnJlZFJlcG9zLmRhdGEpXHJcbiAgICAgICAgICAgIH0pKClcclxuICAgICAgICB9XHJcblx0fSwgW2xvZ2dlZEluXSlcclxuXHJcblx0Y29uc3QgQmVmb3JlTG9naW4gPSAoKSA9PiAoXHJcblx0XHQ8PlxyXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cclxuXHRcdFx0XHQ8QnV0dG9uIGhyZWY9e09BVVRIX1VSTH0gb25DbGljaz17KCkgPT4gc2V0TG9nZ2VkSW4odHJ1ZSl9PlxyXG4gICAgICAgICAgICAgICAgICAgIOacqueZu+W9le+8jOivt+eCueWHu+eZu+W9lVxyXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0XHQ8c3R5bGUganN4PntgXHJcblx0XHRcdFx0LnJvb3Qge1xyXG5cdFx0XHRcdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdFx0XHRcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdGB9PC9zdHlsZT5cclxuXHRcdDwvPlxyXG5cdClcclxuXHRcclxuXHRpZiAoIWxvZ2dlZEluKSB7XHJcblx0XHRyZXR1cm4gPEJlZm9yZUxvZ2luIC8+XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gKFxyXG5cdFx0PD5cclxuXHRcdFx0PGRpdiBjbGFzc05hbWU9XCJyb290XCI+XHJcblx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJ1c2VyLWluZm9cIj5cclxuXHRcdFx0XHRcdDxpbWcgc3JjPXt1c2VyLmF2YXRhcl91cmx9IGFsdD1cInVzZXIgYXZhdGFyXCIgY2xhc3NOYW1lPVwidXNlci1hdmF0YXJcIi8+XHJcblx0XHRcdFx0XHQ8cCBjbGFzc05hbWU9XCJ1c2VyLW5hbWVcIj57dXNlci5sb2dpbn08L3A+XHJcblx0XHRcdFx0PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8VGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8VGFiUGFuZSBrZXk9XCJyZXBvc1wiIHRhYj1cIlJlcG9zaXRvcmllc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXJlcG9zXCI+ICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXJSZXBvcy5tYXAocmVwbyA9PiA8UmVwbyBrZXk9e3JlcG8uaWR9IHJlcG89e3JlcG99IC8+KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIDwvZGl2PiAqL31cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRhYlBhbmUga2V5PVwic3RhcnNcIiB0YWI9XCJTdGFyc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dXNlclN0YXJyZWRSZXBvcy5tYXAocmVwbyA9PiA8UmVwbyBrZXk9e3JlcG8uaWR9IHJlcG89e3JlcG99IC8+KX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICA8L1RhYnM+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0XHQ8c3R5bGUganN4PntgXHJcblx0XHRcdFx0LnJvb3Qge1xyXG5cdFx0XHRcdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdFx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG5cdFx0XHRcdFx0cGFkZGluZzogMjBweCAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQudXNlci1pbmZvIHtcclxuXHRcdFx0XHRcdHdpZHRoOiAyMDBweDtcclxuXHRcdFx0XHRcdG1hcmdpbi1yaWdodDogNDBweDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0LnVzZXItbmFtZSB7XHJcblx0XHRcdFx0XHRmb250LXNpemU6IDIwcHg7XHJcblx0XHRcdFx0XHRmb250LXdlaWdodDogMzAwO1xyXG5cdFx0XHRcdFx0bWFyZ2luLXRvcDogMTBweDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0LnVzZXItYXZhdGFyIHtcclxuXHRcdFx0XHRcdHdpZHRoOiAxMDAlO1xyXG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogNHB4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0YH08L3N0eWxlPlxyXG5cdFx0PC8+XHJcblx0KVxyXG59XHJcblxyXG5jb25zdCBhcGkgPSByZXF1aXJlKCcuLi9saWIvYXBpJylcclxuY29uc3QgaXNTZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ID09PSB1bmRlZmluZWQ7XHJcblxyXG4vL+iwg+eUqO+8miDmnI3liqHnq6/muLLmn5NpbmRleOaXtiAv5a6i5oi356uv5a+86Iiq5YiwaW5kZXjml7ZcclxuSW5kZXguZ2V0SW5pdGl0YWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XHJcbiAgICAvL+a1j+iniOWZqOeOr+Wig++8miBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpXHJcbiAgICAvL25vZGXnjq/looPvvJogYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwJylcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXJsOiAnL3VzZXIvcmVwb3MnXHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgY3R4LnJlcSwgXHJcbiAgICAgICAgY3R4LnJlc1xyXG4gICAgKVxyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiByZXN1bHQuZGF0YVxyXG4gICAgfVxyXG59XHJcblxyXG4iXX0= */\\n/*@ sourceURL=D:\\\\\\\\\\u7F16\\u7A0B\\\\\\\\\\u9879\\u76EE\\\\\\\\next\\u9879\\u76EE\\\\\\\\next-github\\\\\\\\pages\\\\\\\\index.js */\"));\n  };\n\n  if (!loggedIn) {\n    return __jsx(BeforeLogin, null);\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"jsx-1042228906\" + \" \" + \"root\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1042228906\" + \" \" + \"user-info\"\n  }, __jsx(\"img\", {\n    src: user.avatar_url,\n    alt: \"user avatar\",\n    className: \"jsx-1042228906\" + \" \" + \"user-avatar\"\n  }), __jsx(\"p\", {\n    className: \"jsx-1042228906\" + \" \" + \"user-name\"\n  }, user.login)), __jsx(_Tabs, null, __jsx(TabPane, {\n    key: \"repos\",\n    tab: \"Repositories\"\n  }, userRepos.map(function (repo) {\n    return __jsx(Repo, {\n      key: repo.id,\n      repo: repo\n    });\n  })), __jsx(TabPane, {\n    key: \"stars\",\n    tab: \"Stars\"\n  }, userStarredRepos.map(function (repo) {\n    return __jsx(Repo, {\n      key: repo.id,\n      repo: repo\n    });\n  })))), __jsx(_JSXStyle, {\n    id: \"1042228906\"\n  }, \".root.jsx-1042228906{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:20px 0;}.user-info.jsx-1042228906{width:200px;margin-right:40px;}.user-name.jsx-1042228906{font-size:20px;font-weight:300;margin-top:10px;}.user-avatar.jsx-1042228906{width:100%;border-radius:4px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF5RWUsQUFHbUIsQUFLRCxBQUlHLEFBS0osV0FDTyxDQVRBLEdBSUYsY0FNakIsQ0FUQSxDQUlpQixnQkFDakIsMkJBWHdCLDZHQUNSLGVBQ2hCIiwiZmlsZSI6IkQ6XFznvJbnqItcXOmhueebrlxcbmV4dOmhueebrlxcbmV4dC1naXRodWJcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVNlbGVjdG9yIH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCB7IEJ1dHRvbiwgVGFicyB9IGZyb20gJ2FudGQnXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IFJlcG8gZnJvbSAnLi4vY29tcG9uZW50cy9SZXBvJ1xyXG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZydcclxuXHJcbmNvbnN0IHsgT0FVVEhfVVJMIH0gPSBjb25maWc7XHJcbmNvbnN0IHsgVGFiUGFuZSB9ID0gVGFicztcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW5kZXgoeyBkYXRhIH0pIHtcclxuICAgIGNvbnN0IHVzZXIgPSB1c2VTZWxlY3RvcihzdGF0ZSA9PiBzdGF0ZS51c2VyKTtcclxuICAgIGNvbnN0IGluaXRMb2dnZWRJbiA9IHVzZXIgJiYgdXNlci5pZDtcclxuICAgIGNvbnN0IFt1c2VyUmVwb3MsIHNldFVzZXJSZXBvc10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgICBjb25zdCBbdXNlclN0YXJyZWRSZXBvcywgc2V0VXNlclN0YXJyZWRSZXBvc10gPSB1c2VTdGF0ZShbXSk7XHJcbiAgICBjb25zdCBbbG9nZ2VkSW4sIHNldExvZ2dlZEluXSA9IHVzZVN0YXRlKGluaXRMb2dnZWRJbilcclxuXHJcblx0dXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAobG9nZ2VkSW4pIHsgXHJcbiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyUmVwb3MgPSBhd2FpdCBhcGkucmVxdWVzdChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJy91c2VyL3JlcG9zJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclN0YXJyZWRSZXBvcyA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3VzZXIvc3RhcnJlZCdcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICBzZXRVc2VyUmVwb3ModXNlclJlcG9zLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgc2V0VXNlclN0YXJyZWRSZXBvcyh1c2VyU3RhcnJlZFJlcG9zLmRhdGEpXHJcbiAgICAgICAgICAgIH0pKClcclxuICAgICAgICB9XHJcblx0fSwgW2xvZ2dlZEluXSlcclxuXHJcblx0Y29uc3QgQmVmb3JlTG9naW4gPSAoKSA9PiAoXHJcblx0XHQ8PlxyXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cclxuXHRcdFx0XHQ8QnV0dG9uIGhyZWY9e09BVVRIX1VSTH0gb25DbGljaz17KCkgPT4gc2V0TG9nZ2VkSW4odHJ1ZSl9PlxyXG4gICAgICAgICAgICAgICAgICAgIOacqueZu+W9le+8jOivt+eCueWHu+eZu+W9lVxyXG4gICAgICAgICAgICAgICAgPC9CdXR0b24+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0XHQ8c3R5bGUganN4PntgXHJcblx0XHRcdFx0LnJvb3Qge1xyXG5cdFx0XHRcdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdFx0XHRcdGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG5cdFx0XHRcdFx0YWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdGB9PC9zdHlsZT5cclxuXHRcdDwvPlxyXG5cdClcclxuXHRcclxuXHRpZiAoIWxvZ2dlZEluKSB7XHJcblx0XHRyZXR1cm4gPEJlZm9yZUxvZ2luIC8+XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gKFxyXG5cdFx0PD5cclxuXHRcdFx0PGRpdiBjbGFzc05hbWU9XCJyb290XCI+XHJcblx0XHRcdFx0PGRpdiBjbGFzc05hbWU9XCJ1c2VyLWluZm9cIj5cclxuXHRcdFx0XHRcdDxpbWcgc3JjPXt1c2VyLmF2YXRhcl91cmx9IGFsdD1cInVzZXIgYXZhdGFyXCIgY2xhc3NOYW1lPVwidXNlci1hdmF0YXJcIi8+XHJcblx0XHRcdFx0XHQ8cCBjbGFzc05hbWU9XCJ1c2VyLW5hbWVcIj57dXNlci5sb2dpbn08L3A+XHJcblx0XHRcdFx0PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8VGFicz5cclxuICAgICAgICAgICAgICAgICAgICA8VGFiUGFuZSBrZXk9XCJyZXBvc1wiIHRhYj1cIlJlcG9zaXRvcmllc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogPGRpdiBjbGFzc05hbWU9XCJ1c2VyLXJlcG9zXCI+ICovfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3VzZXJSZXBvcy5tYXAocmVwbyA9PiA8UmVwbyBrZXk9e3JlcG8uaWR9IHJlcG89e3JlcG99IC8+KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgey8qIDwvZGl2PiAqL31cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRhYlBhbmUga2V5PVwic3RhcnNcIiB0YWI9XCJTdGFyc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dXNlclN0YXJyZWRSZXBvcy5tYXAocmVwbyA9PiA8UmVwbyBrZXk9e3JlcG8uaWR9IHJlcG89e3JlcG99IC8+KX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYlBhbmU+XHJcbiAgICAgICAgICAgICAgICA8L1RhYnM+XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0XHQ8c3R5bGUganN4PntgXHJcblx0XHRcdFx0LnJvb3Qge1xyXG5cdFx0XHRcdFx0ZGlzcGxheTogZmxleDtcclxuXHRcdFx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG5cdFx0XHRcdFx0cGFkZGluZzogMjBweCAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQudXNlci1pbmZvIHtcclxuXHRcdFx0XHRcdHdpZHRoOiAyMDBweDtcclxuXHRcdFx0XHRcdG1hcmdpbi1yaWdodDogNDBweDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0LnVzZXItbmFtZSB7XHJcblx0XHRcdFx0XHRmb250LXNpemU6IDIwcHg7XHJcblx0XHRcdFx0XHRmb250LXdlaWdodDogMzAwO1xyXG5cdFx0XHRcdFx0bWFyZ2luLXRvcDogMTBweDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0LnVzZXItYXZhdGFyIHtcclxuXHRcdFx0XHRcdHdpZHRoOiAxMDAlO1xyXG5cdFx0XHRcdFx0Ym9yZGVyLXJhZGl1czogNHB4O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0YH08L3N0eWxlPlxyXG5cdFx0PC8+XHJcblx0KVxyXG59XHJcblxyXG5jb25zdCBhcGkgPSByZXF1aXJlKCcuLi9saWIvYXBpJylcclxuY29uc3QgaXNTZXJ2ZXIgPSB0eXBlb2Ygd2luZG93ID09PSB1bmRlZmluZWQ7XHJcblxyXG4vL+iwg+eUqO+8miDmnI3liqHnq6/muLLmn5NpbmRleOaXtiAv5a6i5oi356uv5a+86Iiq5YiwaW5kZXjml7ZcclxuSW5kZXguZ2V0SW5pdGl0YWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XHJcbiAgICAvL+a1j+iniOWZqOeOr+Wig++8miBheGlvcy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpXHJcbiAgICAvL25vZGXnjq/looPvvJogYXhpb3MuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjgwJylcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdXJsOiAnL3VzZXIvcmVwb3MnXHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgY3R4LnJlcSwgXHJcbiAgICAgICAgY3R4LnJlc1xyXG4gICAgKVxyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiByZXN1bHQuZGF0YVxyXG4gICAgfVxyXG59XHJcblxyXG4iXX0= */\\n/*@ sourceURL=D:\\\\\\\\\\u7F16\\u7A0B\\\\\\\\\\u9879\\u76EE\\\\\\\\next\\u9879\\u76EE\\\\\\\\next-github\\\\\\\\pages\\\\\\\\index.js */\"));\n}\n\nvar api = require('../lib/api');\n\nvar isServer = false; //调用： 服务端渲染index时 /客户端导航到index时\n\nIndex.getInititalProps = function _callee2(_ref2) {\n  var ctx, reduxStore, result;\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          ctx = _ref2.ctx, reduxStore = _ref2.reduxStore;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(api.request({\n            url: '/user/repos'\n          }, ctx.req, ctx.res));\n\n        case 3:\n          result = _context2.sent;\n          console.log(result);\n          return _context2.abrupt(\"return\", {\n            data: result.data\n          });\n\n        case 6:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n};","map":{"version":3,"sources":["D:/编程/项目/next项目/next-github/pages/index.js"],"names":["useSelector","useState","useEffect","Repo","config","OAUTH_URL","TabPane","Index","data","user","state","initLoggedIn","id","userRepos","setUserRepos","userStarredRepos","setUserStarredRepos","loggedIn","setLoggedIn","api","request","url","BeforeLogin","avatar_url","login","map","repo","require","isServer","getInititalProps","ctx","reduxStore","req","res","result","console","log"],"mappings":"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","sourcesContent":["import { useSelector } from 'react-redux'\r\nimport { Button, Tabs } from 'antd'\r\nimport { useState, useEffect } from 'react'\r\nimport Repo from '../components/Repo'\r\nimport config from '../config'\r\n\r\nconst { OAUTH_URL } = config;\r\nconst { TabPane } = Tabs;\r\nexport default function Index({ data }) {\r\n    const user = useSelector(state => state.user);\r\n    const initLoggedIn = user && user.id;\r\n    const [userRepos, setUserRepos] = useState([]);\r\n    const [userStarredRepos, setUserStarredRepos] = useState([]);\r\n    const [loggedIn, setLoggedIn] = useState(initLoggedIn)\r\n\r\n\tuseEffect(() => {\r\n        if (loggedIn) { \r\n            (async () => {\r\n                const userRepos = await api.request(\r\n                    {\r\n                        url: '/user/repos'\r\n                    }, \r\n                )\r\n                const userStarredRepos = await api.request(\r\n                    {\r\n                        url: '/user/starred'\r\n                    }\r\n                )\r\n                setUserRepos(userRepos.data);\r\n                setUserStarredRepos(userStarredRepos.data)\r\n            })()\r\n        }\r\n\t}, [loggedIn])\r\n\r\n\tconst BeforeLogin = () => (\r\n\t\t<>\r\n\t\t\t<div className=\"root\">\r\n\t\t\t\t<Button href={OAUTH_URL} onClick={() => setLoggedIn(true)}>\r\n                    未登录，请点击登录\r\n                </Button>\r\n\t\t\t</div>\r\n\t\t\t<style jsx>{`\r\n\t\t\t\t.root {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t}\r\n\t\t\t`}</style>\r\n\t\t</>\r\n\t)\r\n\t\r\n\tif (!loggedIn) {\r\n\t\treturn <BeforeLogin />\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"root\">\r\n\t\t\t\t<div className=\"user-info\">\r\n\t\t\t\t\t<img src={user.avatar_url} alt=\"user avatar\" className=\"user-avatar\"/>\r\n\t\t\t\t\t<p className=\"user-name\">{user.login}</p>\r\n\t\t\t\t</div>\r\n                <Tabs>\r\n                    <TabPane key=\"repos\" tab=\"Repositories\">\r\n                        {/* <div className=\"user-repos\"> */}\r\n                            {userRepos.map(repo => <Repo key={repo.id} repo={repo} />)}\r\n                        {/* </div> */}\r\n                    </TabPane>\r\n                    <TabPane key=\"stars\" tab=\"Stars\">\r\n                        {userStarredRepos.map(repo => <Repo key={repo.id} repo={repo} />)}\r\n                    </TabPane>\r\n                </Tabs>\r\n\t\t\t</div>\r\n\t\t\t<style jsx>{`\r\n\t\t\t\t.root {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: flex-start;\r\n\t\t\t\t\tpadding: 20px 0;\r\n\t\t\t\t}\r\n\t\t\t\t.user-info {\r\n\t\t\t\t\twidth: 200px;\r\n\t\t\t\t\tmargin-right: 40px;\r\n\t\t\t\t}\r\n\t\t\t\t.user-name {\r\n\t\t\t\t\tfont-size: 20px;\r\n\t\t\t\t\tfont-weight: 300;\r\n\t\t\t\t\tmargin-top: 10px;\r\n\t\t\t\t}\r\n\t\t\t\t.user-avatar {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tborder-radius: 4px;\r\n\t\t\t\t}\r\n\t\t\t`}</style>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nconst api = require('../lib/api')\r\nconst isServer = typeof window === undefined;\r\n\r\n//调用： 服务端渲染index时 /客户端导航到index时\r\nIndex.getInititalProps = async ({ ctx, reduxStore }) => {\r\n    //浏览器环境： axios.get('http://localhost:3000')\r\n    //node环境： axios.get('http://localhost:80')\r\n    const result = await api.request(\r\n        {\r\n            url: '/user/repos'\r\n        }, \r\n        ctx.req, \r\n        ctx.res\r\n    )\r\n    console.log(result)\r\n    return {\r\n        data: result.data\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}